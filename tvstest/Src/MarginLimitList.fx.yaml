MarginLimitList As screen:
    Fill: =RGBA(248, 248, 249, 1)
    OnVisible: |-
        =Set(DealDetailTab, 1);
        Set(marginPolicyType, 1);
        Set(inputChanged, false);
        Set(ShowNotification,false);
        UpdateContext({ShowNotification: false});
        Set(MenuSelect,"Business process");
        Set(MenuSelect2,"Margin Limit Approval Process");
        Set(HeaderText,"Margin policy");
        If(IsBlank(currentPageIndex), Set(currentPageIndex, 0));
        Clear(listMarginPolicyInput);
        
        Set(isRiskManager, "RISK_MANAGER_CREATE" in LookUp(currenUserV2.permissionList,process_code = "Process4",action));
        
        Set(isLoading, true);
        
        Concurrent(
        //margin policy
        ClearCollect(MarginPolicyCurrent, 'TVS->GetCurrentPolicyList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).listCurrentPolicy),
        ClearCollect(MarginPolicyHistory, 'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open, resKeyOpenAll.close, "", "", 10, 0, envDEV, envTEST, envUAT1, envUAT2)),
        //untrading
        ClearCollect(listItemUntradingCurrent,'TVS->GetCurrentUnTradingList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).listUnTrading),
        ClearCollect(listItemUnTradingHistory,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2)),
        //equi
        Set(equityCurrent, 'TVS->FindCurrentEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).equity),
        ClearCollect(listEquityHistory,'TVS->FindAllEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2)));
        ClearCollect(listIssuerInput, MarginPolicyCurrent);
        
        Set(isLoading, false);
        Set(DetailIssuer, Blank());
        Reset(TextInput2_6);
        Set(showPopupChangeData, false);
        
        Set(equityAmountFormatted, Blank());

    Canvas4_1 As fluidGrid.fluidGridWithBlankCard:
        BorderThickness: =0
        Height: =Parent.Height - Self.Y
        Width: =Parent.Width
        Y: =
        ZIndex: =1

        DataCard4_1 As dataCard:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderStyle: =BorderStyle.Solid
            BorderThickness: =0
            DisplayMode: =DisplayMode.Edit
            Fill: =RGBA(0, 0, 0, 0)
            Height: =800
            Width: =Parent.Width
            X: =0
            Y: =0
            ZIndex: =1

            White_Background_9 As htmlViewer:
                Font: =Font.Arial
                Height: |-
                    =Switch(DealDetailTab, 
                    1, If(marginPolicyType = 1, Container5_3.Y + Container5_3.Height - Self.Y + 60, Container5_1.Y + Container5_1.Height - Self.Y + 60),
                    2, If(marginPolicyType = 1, Container5_5.Y + Container5_5.Height - Self.Y + 60, Container5_4.Y + Container5_4.Height - Self.Y + 60),
                    3, If(marginPolicyType = 1, Equity_Input.Y + Equity_Input.Height + 60, FromListEncryption_5.Y + FromListEncryption_5.Height - Self.Y + 140)
                    )
                HtmlText: |-
                    ="<div style='width: calc(100% - 16px); height: "& Self.Height - 20 &"px; background-color: white;border-radius: 12px;box-shadow: "& If(Parent.Width > 600, "7px 5px 7px 0px rgba(0, 0, 0, 0.10)", "none") & ";
                    '></div>"
                PaddingRight: =5.00
                PaddingTop: =5.00
                Size: =14.00
                Width: =If(App.Width > 800, App.Width - Self.X, App.Width + 10)
                X: =If(App.Width > 800, If(MobileShowMenu, MenuItemsSideBar_13.Width, MenuItemsSideBar_Small_14.Width) + 10, 0)
                Y: =SubHeaderBg_3.Y + SubHeaderBg_3.Height + 10
                ZIndex: =1

            White_Background_History_1 As htmlViewer:
                Font: =Font.Arial
                Height: =If(DealDetailTab = 1 && marginPolicyType = 2, Header_CreatedDate_1.Height + FromListEncryption_3.Height, FromListEncryption_4.Height + Header_CreatedDate_2.Height) + 40
                HtmlText: |-
                    ="<div style='width: calc(100% - 16px); height: "& Self.Height - 20 &"px; background-color: white;border-radius: 12px;box-shadow: "& If(Parent.Width > 600, "7px 5px 7px 0px rgba(0, 0, 0, 0.10)", "none") & ";
                    '></div>"
                PaddingRight: =5.00
                PaddingTop: =5.00
                Size: =14.00
                Visible: =(DealDetailTab = 2 || DealDetailTab = 1) && marginPolicyType = 2
                Width: =If(DealDetailTab = 1 && marginPolicyType = 2, Header_CreatedBy_1.Width + Header_CreatedDate_1.Width + Header_No_2.Width, Header_CreatedBy_2.Width + Header_No_3.Width + Header_CreatedDate_2.Width) + 50
                X: =If(DealDetailTab = 1 && marginPolicyType = 2, CreateDate_IssuerList_Label_1.X, CreateDate_IssuerList_Label_1.X) - 20
                Y: =btnRefresh_mr_tab_2.Y + btnRefresh_mr_tab_2.Height + 20
                ZIndex: =2

            MarginPolicy_HistoryGroup As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =32

                ClearFormDateQT2_12 As icon.Cancel:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.Cancel
                    OnSelect: =Reset(DateFrom_Datepicker_11);
                    Visible: =!IsBlank(DateFrom_Datepicker_11.SelectedDate) && DealDetailTab = 1 && marginPolicyType = 2
                    Width: =15
                    X: =DateFrom_Datepicker_11.X + DateFrom_Datepicker_11.Width - 50
                    Y: =DateFrom_Datepicker_11.Y + 10
                    ZIndex: =6

                ClearFormDateQT2_13 As icon.Cancel:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.Cancel
                    OnSelect: =Reset(DateTo_DatePicker_11);
                    Visible: =!IsBlank(DateTo_DatePicker_11.SelectedDate) && DealDetailTab = 1 && marginPolicyType = 2
                    Width: =15
                    X: =DateTo_DatePicker_11.X + DateTo_DatePicker_11.Width - 50
                    Y: =DateTo_DatePicker_11.Y + 10
                    ZIndex: =7

                EmptyData_Label_1 As label:
                    Align: =Align.Center
                    Font: =Font.Arial
                    Size: =10.5
                    Text: ="Empty data."
                    Visible: |-
                        =// IsEmpty(First(listRes).listItem) && DealDetailTab = 1 && marginPolicyType = 2
                        false
                    Width: =HrQT2_Table_1.Width
                    X: =HrQT2_Table_1.X
                    Y: =HrQT2_Table_1.Y + 5
                    ZIndex: =8

                DateFrom_InputBack_11 As text:
                    BorderColor: =RGBA(191, 191, 192, 1)
                    BorderThickness: =1
                    Default: ="Đầu vào văn bản"
                    FocusedBorderThickness: =2
                    Font: =Font.Arial
                    Height: =44
                    HoverBorderColor: =RGBA(191, 191, 192, 1)
                    HoverFill: =RGBA(186, 202, 226, 0)
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    RadiusBottomLeft: =8
                    RadiusBottomRight: =8
                    RadiusTopLeft: =8
                    RadiusTopRight: =8
                    Size: =13.00
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =If(Parent.Width > 900, 216.00,  Parent.Width > 800, 150, (App.Width - 40) / 2 - 5)
                    X: =CreateDate_IssuerList_Label_1.X
                    Y: =CreateDate_IssuerList_Label_1.Y + CreateDate_IssuerList_Label_1.Height
                    ZIndex: =9

                DateFrom_Datepicker_11 As datepicker:
                    BorderThickness: =0
                    DefaultDate: =
                    FocusedBorderThickness: =0
                    Font: =Font.Arial
                    Format: ="dd/mm/yyyy"
                    Height: =DateFrom_InputBack_11.Height - 6
                    IconBackground: =RGBA(255, 255, 255, 1)
                    IconFill: =RGBA(0, 0, 0, 1)
                    InputTextPlaceholder: =If(IsBlank(Self.SelectedDate), Text("From", Self.Format, Self.Language))
                    PaddingBottom: =10
                    PaddingLeft: =10
                    PaddingRight: =10
                    PaddingTop: =10
                    Size: =10.5
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =DateFrom_InputBack_11.Width - 6
                    X: =DateFrom_InputBack_11.X + 3
                    Y: =DateFrom_InputBack_11.Y + 3
                    ZIndex: =10

                DateTo_InputBack_10 As text:
                    BorderColor: =RGBA(191, 191, 192, 1)
                    BorderThickness: =1
                    Default: ="Đầu vào văn bản"
                    FocusedBorderThickness: =2
                    Font: =Font.Arial
                    Height: =44
                    HoverBorderColor: =RGBA(191, 191, 192, 1)
                    HoverFill: =RGBA(186, 202, 226, 0)
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    RadiusBottomLeft: =8
                    RadiusBottomRight: =8
                    RadiusTopLeft: =8
                    RadiusTopRight: =8
                    Size: =13.00
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =If(Parent.Width > 900, 216.00,  Parent.Width > 800, 150, (App.Width - 40) / 2 - 5)
                    X: =DateFrom_InputBack_11.X + DateFrom_InputBack_11.Width + 10
                    Y: =DateFrom_InputBack_11.Y
                    ZIndex: =11

                DateTo_DatePicker_11 As datepicker:
                    BorderThickness: =0
                    DefaultDate: =
                    FocusedBorderThickness: =0
                    Font: =Font.Arial
                    Format: ="dd/mm/yyyy"
                    Height: =DateTo_InputBack_10.Height - 6
                    IconBackground: =RGBA(255, 255, 255, 1)
                    IconFill: =RGBA(0, 0, 0, 1)
                    InputTextPlaceholder: =If(IsBlank(Self.SelectedDate), Text("To", Self.Format, Self.Language))
                    PaddingBottom: =10
                    PaddingLeft: =10
                    PaddingRight: =10
                    PaddingTop: =10
                    Size: =10.5
                    StartYear: =If(IsBlank(DateFrom_Datepicker_11.SelectedDate), 1970, Year(DateFrom_Datepicker_11.SelectedDate))
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =DateTo_InputBack_10.Width - 6
                    X: =DateTo_InputBack_10.X + 3
                    Y: =DateTo_InputBack_10.Y + 3
                    ZIndex: =12

                SearchAUMIcon_16 As htmlViewer:
                    Font: =Font.Arial
                    Height: =35
                    HtmlText: |-
                        ="<div style=""cursor: pointer; width: 30px; height: 3-px; padding: 5px""><svg xmlns=""http://www.w3.org/2000/svg"" width=""21"" height=""20"" viewBox=""0 0 21 20"" fill=""none"">
                          <path d=""M19.5002 19.0002L15.1572 14.6572M15.1572 14.6572C15.9001 13.9143 16.4894 13.0324 16.8914 12.0618C17.2935 11.0911 17.5004 10.0508 17.5004 9.00021C17.5004 7.9496 17.2935 6.90929 16.8914 5.93866C16.4894 4.96803 15.9001 4.08609 15.1572 3.34321C14.4143 2.60032 13.5324 2.01103 12.5618 1.60898C11.5911 1.20693 10.5508 1 9.50021 1C8.4496 1 7.40929 1.20693 6.43866 1.60898C5.46803 2.01103 4.58609 2.60032 3.84321 3.34321C2.34288 4.84354 1.5 6.87842 1.5 9.00021C1.5 11.122 2.34288 13.1569 3.84321 14.6572C5.34354 16.1575 7.37842 17.0004 9.50021 17.0004C11.622 17.0004 13.6569 16.1575 15.1572 14.6572Z"" stroke=""white"" stroke-width=""2"" stroke-linecap=""round"" stroke-linejoin=""round""/>
                        </svg><div>"
                    OnSelect: |-
                        =Set(isLoading, true);
                        Set(DetailIssuer, Blank());
                        If(DateDiff(DateFrom_Datepicker_11.SelectedDate, DateTo_DatePicker_11.SelectedDate) < 0,
                        
                        Set(NoticationText, "The from date cannot be greater than the to date!"); Set(IsError, true); UpdateContext({ShowNotification: true}); Set(isLoading, false),
                        
                        Set(dateFromFilterVar,DateFrom_Datepicker_11.SelectedDate);
                        Set(dateToFilterVar,DateTo_DatePicker_11.SelectedDate);
                        Set(currentPageIndex,0);
                        Set(PageSizeNumber, 5);
                        ClearCollect(listItem,'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open,resKeyOpenAll.close,Text(DateFrom_Datepicker_11.SelectedDate, "yyyy-mm-dd hh:mm:ss"),Text(DateTo_DatePicker_11.SelectedDate, "yyyy-mm-dd hh:mm:ss"),PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(
                            listRes,
                            listItem.listItem
                        );
                        
                        
                        Set(
                                pageCount,
                                First(listItem.pageCount).pageCount
                            );
                            Set(
                                pageIndexFirst,
                                5 * RoundDown(
                                    currentPageIndex / 5,
                                    0
                                )
                            );
                            ClearCollect(
                                listPageIndex,
                                pageIndexFirst
                            );
                            ForAll(
                                maxList,
                                If(
                                    Last(listPageIndex).Value + 1 < pageCount,
                                    Collect(
                                        listPageIndex,
                                        Last(listPageIndex).Value + 1
                                    );
                                );
                            );
                            Set(
                                isLoading,
                                false
                            );
                        );
                        Set(isLoading, false);
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =30
                    X: =SearchAUMButton_16.X + 20
                    Y: =SearchAUMButton_16.Y + 6
                    ZIndex: =13

                FromListEncryption_3 As gallery.galleryVertical:
                    '#CopilotOverlayLabel': ="Filtered"
                    BorderColor: =RGBA(255, 255, 255, 1)
                    Fill: =RGBA(255, 255, 255, 1)
                    Height: =Min(Max(FromListEncryption_3.AllItemsCount, 1) * Self.TemplateHeight, 10 * Self.TemplateHeight)
                    Items: =listDataHistoryPolici
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    OnSelect: =true
                    TemplateFill: =//If(Mod(Value(ThisItem.id), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                    TemplatePadding: =0
                    TemplateSize: =40
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =If(App.Width > 800, SearchAUMButton_16.X + SearchAUMButton_16.Width, DateTo_InputBack_10.X + DateTo_InputBack_10.Width - 15) - Self.X
                    X: =Header_No_2.X
                    Y: =Header_No_2.Y + Header_No_2.Height + 5
                    ZIndex: =14

                    Button_OverLay_4 As button:
                        Fill: =RGBA(0, 0, 0, 0)
                        Font: =Font.Arial
                        HoverFill: =Self.Fill
                        OnSelect: |-
                            =Set(colEncryption1, ThisItem);
                            Set(isEditShowPopup, true)
                        PressedFill: =
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Text: =""
                        Width: =Parent.Width
                        ZIndex: =1

                    Label_No_3 As label:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =If(!IsBlank(HistorySelectedItemSTT) && ThisItem.stt = HistorySelectedItemSTT, RGBA(209, 221, 255, 0.5), Mod(Value(ThisItem.stt), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                        Font: =Font.Arial
                        OnSelect: =Select(Parent)
                        PaddingRight: =5.00
                        PaddingTop: =5.00
                        Size: =10.5
                        Text: =ThisItem.stt
                        Width: =Header_No_2.Width
                        X: =0 - If(App.Width > 600, 0, 0)
                        ZIndex: =2

                    Label_Name_3 As label:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =If(!IsBlank(HistorySelectedItemSTT) && ThisItem.stt = HistorySelectedItemSTT, RGBA(209, 221, 255, 0.5), Mod(Value(ThisItem.stt), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                        Font: =Font.Arial
                        OnSelect: =Select(Parent)
                        PaddingRight: =5.00
                        PaddingTop: =10
                        Size: =10.5
                        Text: |-
                            =Text(DateTimeValue(ThisItem.created_date), "dd/mm/yyyy hh:mm:ss")
                        Width: =Header_CreatedDate_1.Width
                        X: =Label_No_3.X + Label_No_3.Width
                        ZIndex: =3

                    Label_createdBy_1 As label:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =If(!IsBlank(HistorySelectedItemSTT) && ThisItem.stt = HistorySelectedItemSTT, RGBA(209, 221, 255, 0.5), Mod(Value(ThisItem.stt), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                        Font: =Font.Arial
                        OnSelect: =Select(Parent)
                        PaddingRight: =30
                        PaddingTop: =5.00
                        Size: =10.5
                        Text: =ThisItem.created_by
                        Width: =Header_CreatedBy_1.Width
                        X: =Label_Name_3.X + Label_Name_3.Width
                        ZIndex: =4

                    SeeIcon_1 As htmlViewer:
                        Fill: =RGBA(0,0,0,0)
                        Font: =Font.Arial
                        HtmlText: |-
                            ="<div style=""width:40px; height:38px; display:flex; justify-content:center; align-items:center; cursor:pointer""><svg xmlns=""http://www.w3.org/2000/svg"" width=""22"" height=""16"" viewBox=""0 0 22 16"" fill=""none"">
                              <path d=""M11 5C10.2044 5 9.44129 5.31607 8.87868 5.87868C8.31607 6.44129 8 7.20435 8 8C8 8.79565 8.31607 9.55871 8.87868 10.1213C9.44129 10.6839 10.2044 11 11 11C11.7956 11 12.5587 10.6839 13.1213 10.1213C13.6839 9.55871 14 8.79565 14 8C14 7.20435 13.6839 6.44129 13.1213 5.87868C12.5587 5.31607 11.7956 5 11 5ZM11 13C9.67392 13 8.40215 12.4732 7.46447 11.5355C6.52678 10.5979 6 9.32608 6 8C6 6.67392 6.52678 5.40215 7.46447 4.46447C8.40215 3.52678 9.67392 3 11 3C12.3261 3 13.5979 3.52678 14.5355 4.46447C15.4732 5.40215 16 6.67392 16 8C16 9.32608 15.4732 10.5979 14.5355 11.5355C13.5979 12.4732 12.3261 13 11 13ZM11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5Z"" fill=""black""/>
                            </svg></div>"
                        OnSelect: |-
                            =Set(isLoading, true);
                            Set(HistorySelectedItemSTT, ThisItem.stt);
                            Set(DetailIssuerInMRHistory,'TVS->DetailListPolicy'.Run(resKeyOpenAll.open,resKeyOpenAll.close, ThisItem.group_id,envDEV,envTEST,envUAT1,envUAT2).listCurrentPolicy);
                            Set(isLoading, false);
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Width: =40
                        X: =Label_createdBy_1.X + Label_createdBy_1.Width - Self.Width
                        ZIndex: =5

                Header_CreatedDate_1 As label:
                    BorderColor: =RGBA(89, 0, 0, 1)
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Bold
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    Size: =10.5
                    Text: ="Modify date"
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =HrQT2_Table_1.Width * If(App.Width > 600, 0.5, 0.5)
                    X: =Header_No_2.X + Header_No_2.Width
                    Y: =Header_No_2.Y
                    ZIndex: =15

                Header_No_2 As label:
                    BorderColor: =RGBA(89, 0, 0, 1)
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Semibold
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    Size: =10.5
                    Text: ="No"
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =HrQT2_Table_1.Width * 0.1
                    X: =White_Background_History_1.X + 20
                    Y: =White_Background_History_1.Y + 10
                    ZIndex: =16

                Header_CreatedBy_1 As label:
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Bold
                    Size: =10.5
                    Text: ="Modify by"
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =HrQT2_Table_1.Width * If(App.Width > 600, 0.45, 0.4) - If(App.Width > 600, 30, 0)
                    X: =Header_CreatedDate_1.X + Header_CreatedDate_1.Width
                    Y: =Header_No_2.Y
                    ZIndex: =17

                PreviousIcon_13 As icon.ChevronLeft:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.ChevronLeft
                    OnSelect: |-
                        =Set(currentPageIndex,currentPageIndex-1);
                        ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                        ClearCollect(MarginPolicyHistory,'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                        Set(pageCount,First(MarginPolicyHistory).pageCount);
                    Tooltip: ="Previous page"
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2 && currentPageIndex <> 0 && FromListEncryption_3.AllItemsCount <> 0
                    Width: =15
                    X: =White_Background_History_1.X + 10 
                    Y: =White_Background_History_1.Y + White_Background_History_1.Height + 10
                    ZIndex: =18

                NextIcon_13 As icon.ChevronRight:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.ChevronRight
                    OnSelect: |-
                        =Set(currentPageIndex,currentPageIndex+1);
                        ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                        ClearCollect(MarginPolicyHistory,'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                        Set(pageCount,First(MarginPolicyHistory).pageCount);
                    Tooltip: ="Next page"
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2 && currentPageIndex < pageCount - 1 && FromListEncryption_3.AllItemsCount <> 0
                    Width: =15
                    X: =PageNumbers_13.X + PageNumbers_13.Width
                    Y: =PreviousIcon_13.Y
                    ZIndex: =19

                "PageNumbers_13 As gallery.'BrowseLayout_Horizontal_TwoTextOneImageVariant_ver5.0'":
                    '#CopilotOverlayLabel': ="Filtered"
                    Height: =44
                    Items: =listPageIndex
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =40
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2 && FromListEncryption_3.AllItemsCount <> 0
                    Width: =Self.AllItemsCount * Self.TemplateWidth
                    X: =PreviousIcon_13.X + PreviousIcon_13.Width
                    Y: =PreviousIcon_13.Y - 10
                    ZIndex: =20

                    pageIndex_13 As htmlViewer:
                        DisplayMode: |
                            =DisplayMode.Edit
                        Font: =Font.Arial
                        HtmlText: |-
                            ="<div style='width: 15px; display: flex; justify-content: center; align-items: center; cursor: pointer; padding: 3px; background-color: transparent; border-radius: 5px; border: " & If(currentPageIndex = ThisItem.Value, "1px solid #1890FF", "none")&";'><font color=" & If(currentPageIndex = ThisItem.Value, "#1890FF", "black")&">" & (ThisItem.Value + 1) & "</font></div>"
                        OnSelect: |-
                            =Set(currentPageIndex,ThisItem.Value);
                            ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                            ClearCollect(MarginPolicyHistory,'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                            ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                            Set(pageCount,First(MarginPolicyHistory).pageCount);
                        PaddingRight: =0
                        Width: =40
                        ZIndex: =2

                CreateDate_IssuerList_Label_1 As label:
                    BorderColor: =RGBA(89, 0, 0, 1)
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Bold
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    Size: =10.5
                    Text: ="Created date"
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =100
                    X: =QT_Action_list_stock.X
                    Y: =QT_Action_list_stock.Y + QT_Action_list_stock.Height
                    ZIndex: =21

                HrQT2_Table_1 As rectangle:
                    BorderColor: =RGBA(176, 176, 176, 1)
                    BorderThickness: =1
                    Fill: =RGBA(246, 246, 246, 1)
                    Height: =0.5
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2
                    Width: =FromListEncryption_3.Width
                    X: =FromListEncryption_3.X
                    Y: =FromListEncryption_3.Y - 7
                    ZIndex: =22

                Container5_1 As groupContainer.verticalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    Height: =If(DealDetailTab = 1 && marginPolicyType = 2 && CountRows(DetailIssuerInMRHistory) > 0, Container6_3.Height + 15, 0)
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutMode: =LayoutMode.Auto
                    LayoutOverflowX: =LayoutOverflow.Scroll
                    LayoutOverflowY: =LayoutOverflow.Scroll
                    Visible: =DealDetailTab = 1 && marginPolicyType = 2 && CountRows(DetailIssuerInMRHistory) > 0
                    Width: =White_Background_9.Width - 50
                    X: =Labe_lbillion_VND.X
                    Y: =Labe_lbillion_VND.Y + Labe_lbillion_VND.Height
                    ZIndex: =23

                    Container6_3 As groupContainer.manualLayoutContainer:
                        DropShadow: =DropShadow.None
                        FillPortions: =0
                        Height: =Gallery8_7.Height + 60
                        LayoutMinHeight: =Gallery8_7.Height + 60
                        LayoutMinWidth: =layout_stockLiquidityScore_1.X + layout_stockLiquidityScore_1.Width + 20
                        ZIndex: =2

                        layout_ticker_no As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =100
                            ZIndex: =1

                        layout_ticker_1 As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =100
                            X: =layout_ticker_no.X + layout_ticker_no.Width
                            ZIndex: =2

                        layout_market_1 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =120
                            X: =layout_ticker_1.X + layout_ticker_1.Width
                            Y: =layout_ticker_1.Y
                            ZIndex: =3

                        layout_marginRatio_1 As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =180
                            X: =layout_market_1.X + layout_market_1.Width
                            Y: =layout_market_1.Y
                            ZIndex: =4

                        layout_maxQtyAll_1 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =250
                            X: =layout_marginRatio_1.X + layout_marginRatio_1.Width
                            Y: =layout_marginRatio_1.Y
                            ZIndex: =5

                        layout_maxQtyPer_1 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =250
                            X: =layout_maxQtyAll_1.X + layout_maxQtyAll_1.Width
                            Y: =layout_marginRatio_1.Y
                            ZIndex: =6

                        layout_MaxPctPer_1 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =250
                            X: =layout_maxQtyPer_1.X + layout_maxQtyPer_1.Width
                            Y: =layout_marginRatio_1.Y
                            ZIndex: =7

                        layout_MaxPctAll_1 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =250
                            X: =layout_MaxPctPer_1.X + layout_MaxPctPer_1.Width
                            Y: =layout_marginRatio_1.Y
                            ZIndex: =8

                        label_ticker_no As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="No"
                            Width: =layout_ticker_no.Width
                            X: =layout_ticker_no.X
                            Y: =layout_ticker_no.Y
                            ZIndex: =9

                        label_ticker_1 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Ticker"
                            Width: =layout_ticker_1.Width
                            X: =layout_ticker_1.X
                            Y: =layout_ticker_1.Y
                            ZIndex: =10

                        label_market_1 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Market"
                            Width: =layout_market_1.Width
                            X: =layout_market_1.X
                            Y: =layout_market_1.Y
                            ZIndex: =11

                        label_marginRatio_1 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Margin Ratio"
                            Width: =layout_marginRatio_1.Width
                            X: =layout_marginRatio_1.X
                            Y: =layout_market_1.Y
                            ZIndex: =12

                        label_maxQtyAll_1 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Max Margined Loan Amt Per Client"
                            Width: =layout_maxQtyAll_1.Width
                            X: =layout_maxQtyAll_1.X
                            Y: =layout_maxQtyAll_1.Y
                            ZIndex: =13

                        label_maxQtyPer_1 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Max Margined Loan Amt All Client"
                            Width: =layout_maxQtyPer_1.Width
                            X: =layout_maxQtyPer_1.X
                            Y: =layout_maxQtyPer_1.Y
                            ZIndex: =14

                        label_maxPctPer_1 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Max Margined Qty All Client"
                            Width: =layout_MaxPctPer_1.Width
                            X: =layout_MaxPctPer_1.X
                            Y: =layout_MaxPctPer_1.Y
                            ZIndex: =15

                        label_maxPctAll_1 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Max Margined Qty Per Client"
                            Width: =layout_MaxPctAll_1.Width
                            X: =layout_MaxPctAll_1.X
                            Y: =layout_MaxPctAll_1.Y
                            ZIndex: =16

                        layout_effectiveDate_1 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =250
                            X: =layout_MaxPctAll_1.X + layout_MaxPctAll_1.Width
                            Y: =layout_marginRatio.Y
                            ZIndex: =17

                        label_effectiveDate_1 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Effective date"
                            Visible: =Parent.Visible
                            Width: =layout_effectiveDate_1.Width
                            X: =layout_effectiveDate_1.X
                            Y: =layout_effectiveDate_1.Y
                            ZIndex: =18

                        layout_stockLiquidityScore_1 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =250
                            X: =layout_effectiveDate_1.X + layout_effectiveDate_1.Width
                            Y: =layout_marginRatio.Y
                            ZIndex: =19

                        label_stockLiquidityScore_1 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Stock liquidity score"
                            Visible: =Parent.Visible
                            Width: =layout_stockLiquidityScore_1.Width
                            X: =layout_stockLiquidityScore_1.X
                            Y: =layout_stockLiquidityScore_1.Y
                            ZIndex: =20

                        "Gallery8_7 As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver5.0'":
                            '#CopilotOverlayLabel': ="Filtered"
                            Height: =If(Self.AllItemsCount * Self.TemplateHeight > (Self.TemplateHeight * If(App.Width > 600, 8, 6)), (Self.TemplateHeight * If(App.Width > 600, 8, 6)), Self.AllItemsCount * Self.TemplateHeight)
                            Items: =DetailIssuerInMRHistory
                            Layout: =Layout.Vertical
                            TemplatePadding: =0
                            TemplateSize: =If(App.Width > 600, 50, 70)
                            Width: =layout_stockLiquidityScore_G_1.X + layout_stockLiquidityScore_G_1.Width + 20
                            Y: =layout_ticker_1.Y + layout_ticker_1.Height
                            ZIndex: =21

                            layout_tickerNo As rectangle:
                                BorderColor: =RGBA(192, 192, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_7.TemplateHeight
                                Width: =layout_ticker_no.Width
                                ZIndex: =1

                            label_tickerNo As label:
                                Font: =Font.Arial
                                Height: =Gallery8_7.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.order_number
                                Width: =layout_tickerNo.Width
                                X: =layout_tickerNo.X
                                Y: =layout_tickerNo.Y
                                ZIndex: =2

                            layout_tickerFor_1 As rectangle:
                                BorderColor: =RGBA(192, 192, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_7.TemplateHeight
                                Width: =layout_ticker_1.Width
                                X: =layout_tickerNo.X + layout_tickerNo.Width
                                ZIndex: =3

                            layout_marketFor_1 As rectangle:
                                BorderColor: =RGBA(191, 191, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_7.TemplateHeight
                                Width: =layout_market_1.Width
                                X: =layout_tickerFor_1.X + layout_tickerFor_1.Width
                                Y: =layout_tickerFor_1.Y
                                ZIndex: =4

                            layout_marginRatioFor_1 As rectangle:
                                BorderColor: =RGBA(192, 192, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_7.TemplateHeight
                                Width: =label_marginRatio_1.Width
                                X: =layout_marketFor_1.X + layout_marketFor_1.Width
                                Y: =layout_marketFor_1.Y
                                ZIndex: =5

                            layout_maxQtyAllFor_1 As rectangle:
                                BorderColor: =RGBA(191, 191, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_7.TemplateHeight
                                Width: =layout_maxQtyAll_1.Width 
                                X: =layout_marginRatioFor_1.X + layout_marginRatioFor_1.Width
                                Y: =layout_marginRatioFor_1.Y
                                ZIndex: =6

                            layout_maxQtyPerFor_1 As rectangle:
                                BorderColor: =RGBA(191, 191, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_7.TemplateHeight
                                Width: =layout_maxQtyAll_1.Width 
                                X: =layout_maxQtyAllFor_1.X + layout_maxQtyAllFor_1.Width
                                Y: =layout_marginRatioFor_1.Y
                                ZIndex: =7

                            layout_maxPctPerFor_1 As rectangle:
                                BorderColor: =RGBA(191, 191, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_7.TemplateHeight
                                Width: =layout_maxQtyAll_1.Width 
                                X: =layout_maxQtyPerFor_1.X + layout_maxQtyPerFor_1.Width
                                Y: =layout_marginRatioFor_1.Y
                                ZIndex: =8

                            layout_MaxPctAllFor_1 As rectangle:
                                BorderColor: =RGBA(191, 191, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_7.TemplateHeight
                                Width: =layout_maxQtyAll_1.Width 
                                X: =layout_maxPctPerFor_1.X + layout_maxPctPerFor_1.Width
                                Y: =layout_marginRatioFor_1.Y
                                ZIndex: =9

                            label_tickerFor_1 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_7.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.stock_id
                                Width: =layout_tickerFor_1.Width
                                X: =layout_tickerFor_1.X
                                Y: =layout_tickerFor_1.Y
                                ZIndex: =10

                            label_marketFor_1 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_7.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.market
                                Width: =layout_marketFor_1.Width
                                X: =layout_marketFor_1.X
                                Y: =layout_marketFor_1.Y
                                ZIndex: =11

                            label_marginRatioFor_1 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_7.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.margin_ratio&"%"
                                Width: =layout_marginRatioFor_1.Width
                                X: =layout_marginRatioFor_1.X
                                Y: =layout_marginRatioFor_1.Y
                                ZIndex: =12

                            label_maxQtyAllFor_1 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_7.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: |-
                                    =//Text(Value(ThisItem.max_margined_amt_per_client), "[$-en-GB]#,###")
                                    ThisItem.max_margined_amt_per_client
                                Width: =layout_maxQtyAllFor_1.Width
                                X: =layout_maxQtyAllFor_1.X
                                Y: =layout_maxQtyAllFor_1.Y
                                ZIndex: =13

                            label_maxQtyPerFor_1 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_7.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: |-
                                    =//Text(Value(ThisItem.max_margined_amt_all_client), "[$-en-GB]#,###")
                                    ThisItem.max_margined_amt_all_client
                                Width: =layout_maxQtyPerFor_1.Width
                                X: =layout_maxQtyPerFor_1.X
                                Y: =layout_maxQtyPerFor_1.Y
                                ZIndex: =14

                            label_maxPctPerFor_1 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_7.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: |-
                                    =//Text(Value(ThisItem.max_margined_quantity_all_client), "[$-en-GB]#,###")
                                    ThisItem.max_margined_quantity_all_client
                                Width: =layout_maxPctPerFor_1.Width
                                X: =layout_maxPctPerFor_1.X
                                Y: =layout_maxPctPerFor_1.Y
                                ZIndex: =15

                            label_maxPctAllFor_1 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_7.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: |-
                                    =//Text(Value(ThisItem.max_margined_quantity_per_client), "[$-en-GB]#,###")
                                    ThisItem.max_margined_quantity_per_client
                                Width: =layout_MaxPctAllFor_1.Width
                                X: =layout_MaxPctAllFor_1.X
                                Y: =layout_MaxPctAllFor_1.Y
                                ZIndex: =16

                            layout_effectiveDate_G_1 As rectangle:
                                BorderColor: =RGBA(192, 192, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Width: =layout_maxQtyAll.Width 
                                X: =layout_MaxPctAllFor_1.X + layout_MaxPctAllFor_1.Width
                                Y: =layout_marginRatioFor.Y
                                ZIndex: =17

                            label_effectiveDate_G_1 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.effective_date
                                Visible: =DealDetailTab = 1
                                Width: =layout_effectiveDate_G_1.Width
                                X: =layout_effectiveDate_G_1.X
                                Y: =layout_effectiveDate_G_1.Y
                                ZIndex: =18

                            layout_stockLiquidityScore_G_1 As rectangle:
                                BorderColor: =RGBA(192, 192, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Width: =layout_maxQtyAll.Width 
                                X: =layout_effectiveDate_G_1.X + layout_effectiveDate_G_1.Width
                                Y: =layout_marginRatioFor.Y
                                ZIndex: =19

                            label_stockLiquidityScore_G_1 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.stock_liquidity_score
                                Visible: =DealDetailTab = 1
                                Width: =layout_stockLiquidityScore_G_1.Width
                                X: =layout_stockLiquidityScore_G_1.X
                                Y: =layout_stockLiquidityScore_G_1.Y
                                ZIndex: =20

            MarginPolicy_CurrentGroup As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =32

                InputDateHere_Label_7 As label:
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Bold
                    Height: =42
                    Size: =10.5
                    Text: ="Input data here"
                    Visible: =DealDetailTab = 1 && marginPolicyType = 1
                    Width: =120
                    X: =QT_Action_list_stock.X
                    Y: =QT_Action_list_stock.Y + QT_Action_list_stock.Height + 10
                    ZIndex: =3

                TextInput2_6 As text:
                    BorderColor: =RGBA(191, 191, 192, 1)
                    BorderThickness: =1
                    Default: =
                    DisplayMode: =If(isRiskManager, DisplayMode.Edit, DisplayMode.Disabled)
                    FocusedBorderThickness: =1
                    Font: =Font.Arial
                    Height: =44
                    HoverFill: =RGBA(186, 202, 226, 0)
                    Mode: =TextMode.MultiLine
                    OnChange: |-
                        =Set(inputChanged, false);
                        ClearCollect(listMarginPolicyData, []);
                        ClearCollect(mlInvalidRows, []);
                        Set(splitMarginPolicy, Substitute(Split(Self.Text,Char(10)), Char(9),"~"));
                        Set(splitMarginPolicyabcd, Substitute(Self.Text, Char(9),"~"));
                        ClearCollect(numOrder,0);
                        ForAll(Filter(splitMarginPolicy, !IsBlank(Value)) As data1,
                            Collect(numOrder,Last(numOrder).Value+1 );
                            If(IsBlank(Upper(First(Split(data1.Value,"~")).Value)) || // Ticker bắt buộc
                                !IsMatch(Upper(First(Split(data1.Value,"~")).Value), "^[a-zA-Z0-9]+$") || // Check special characters
                                CountIf(splitMarginPolicy As itemList, StartsWith(itemList.Value, Upper(First(Split(data1.Value,"~")).Value) & "~")) > 1 || // Check unique ticker
                                !IsBlank(Last(FirstN((Split(data1.Value,"~")),3)).Value) && !IsMatch(Last(FirstN((Split(data1.Value,"~")),3)).Value, "^[0-9]+(\.[0-9]+)?$") ||
                                 // check only one pointer
                                !IsBlank(Last(FirstN((Split(data1.Value,"~")),2)).Value) && !IsMatch(Last(FirstN((Split(data1.Value,"~")),2)).Value, "^[a-zA-Z0-9]+$") ||
                        
                                (!IsBlank(Last(FirstN((Split(data1.Value,"~")),4)).Value) && !IsNumeric(Last(FirstN((Split(data1.Value,"~")),4)).Value)) ||
                                (!IsBlank(Last(FirstN((Split(data1.Value,"~")),5)).Value) && !IsNumeric(Last(FirstN((Split(data1.Value,"~")),5)).Value)) ||
                                (!IsBlank(Last(FirstN((Split(data1.Value,"~")),4)).Value) &&
                                Value(Last(FirstN((Split(data1.Value,"~")),4)).Value) > Value(Last(FirstN((Split(data1.Value,"~")),5)).Value)) ||
                                (!IsBlank(Last(FirstN((Split(data1.Value,"~")),6)).Value) && !IsNumeric(Last(FirstN((Split(data1.Value,"~")),6)).Value)) ||
                                (!IsBlank(Last(FirstN((Split(data1.Value,"~")),7)).Value) && !IsNumeric(Last(FirstN((Split(data1.Value,"~")),7)).Value)) ||
                                (!IsBlank(Last(FirstN((Split(data1.Value,"~")),6)).Value) &&
                                Value(Last(FirstN((Split(data1.Value,"~")),6)).Value) > Value(Last(FirstN((Split(data1.Value,"~")),7)).Value)) ||
                                Value(Last(FirstN((Split(data1.Value,"~")),3)).Value) < 0 || 
                                Mod(Value(Last(FirstN((Split(data1.Value,"~")),3)).Value), 5) <> 0 || 
                                Value(Last(FirstN((Split(data1.Value,"~")),3)).Value) > 50 ||
                                ((CountRows(Split(Last(FirstN((Split(data1.Value,"~")),8)).Value, "/")) <> 3 
                                || Value(First(Split(Last(FirstN((Split(data1.Value,"~")),8)).Value, "/")).Value) > 31 || Value(First(Split(Last(FirstN((Split(data1.Value,"~")),8)).Value, "/")).Value) <= 0
                                || Value(Last(FirstN(Split(Last(FirstN((Split(data1.Value,"~")),8)).Value, "/"), 2)).Value) > 12 || Value(Last(FirstN(Split(Last(FirstN((Split(data1.Value,"~")),8)).Value, "/"), 2)).Value) <= 0
                                || Len(Last(Split(Last(FirstN((Split(data1.Value,"~")),8)).Value, "/")).Value) <> 4 || Value(First(Split(Last(FirstN((Split(data1.Value,"~")),8)).Value, "/")).Value) <= 0)) && (CountRows(Split(data1.Value,"~")) >= 8 && !IsBlank(Last(Split(Last(FirstN((Split(data1.Value,"~")),8)).Value, "/")).Value)) ||
                                (CountRows(Split(data1.Value,"~")) >= 9 && !IsBlank(Last(Split(Last(FirstN((Split(data1.Value,"~")),9)).Value, "/")).Value)) && !IsNumeric(Last(FirstN((Split(data1.Value,"~")),9)).Value)
                               ,
                                Collect(mlInvalidRows, data1));
                            Collect(listMarginPolicyData,
                                {   
                                    stt:Last(numOrder).Value,
                                    stock_id: Upper(First(Split(data1.Value,"~")).Value),
                                    market: Last(FirstN((Split(data1.Value,"~")),2)).Value,
                                    margin_ratio: Last(FirstN((Split(data1.Value,"~")),3)).Value,
                                    max_margined_amt_per_client: Last(FirstN((Split(data1.Value,"~")),4)).Value,            
                                    max_margined_amt_all_client: Last(FirstN((Split(data1.Value,"~")),5)).Value,
                                    max_margined_quantity_per_client: Last(FirstN((Split(data1.Value,"~")),6)).Value,
                                    max_margined_quantity_all_client: Last(FirstN((Split(data1.Value,"~")),7)).Value,
                                    effective_date: If(CountRows(Split(data1.Value,"~")) < 8, "", Last(FirstN((Split(data1.Value,"~")),8)).Value),
                                    stock_liquidity_score: If(CountRows(Split(data1.Value,"~")) < 9, "", Last(FirstN((Split(data1.Value,"~")),9)).Value)
                                }
                            )
                        );
                        If(!IsEmpty(listMarginPolicyData) && !IsBlank(Trim(Self.Text)), Set(inputChanged, true));
                        ClearCollect(listMarginPolicyInput,listMarginPolicyData);
                        Clear(listMarginPolicyData);
                        Reset(Self);
                    Size: =If(App.Width > 800, 10.5, 16)
                    Visible: =DealDetailTab = 1 && marginPolicyType = 1
                    Width: =If(Parent.Width > 600, 250, App.Width - InputDateHere_Label_7.Width - 90)
                    X: =InputDateHere_Label_7.X + InputDateHere_Label_7.Width
                    Y: =InputDateHere_Label_7.Y
                    ZIndex: =4

                Container5_3 As groupContainer.verticalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    Height: =Container6_8.Height + 15
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutMode: =LayoutMode.Auto
                    LayoutOverflowX: =LayoutOverflow.Scroll
                    LayoutOverflowY: =LayoutOverflow.Scroll
                    Visible: =DealDetailTab = 1 && marginPolicyType = 1
                    Width: =White_Background_9.Width - 50
                    X: =InputDateHere_Label_7.X
                    Y: =InvalidData_Label.Y + InvalidData_Label.Height + If(IsEmpty(mlInvalidRows), 0, 0)
                    ZIndex: =5

                    Container6_8 As groupContainer.manualLayoutContainer:
                        DropShadow: =DropShadow.None
                        FillPortions: =0
                        Height: =Gallery8_8.Height + 60
                        LayoutMinHeight: =Gallery8_8.Height + 60
                        LayoutMinWidth: =layout_stockLiquidityScore.X + layout_stockLiquidityScore.Width + 20
                        Visible: =Parent.Visible
                        ZIndex: =2

                        layout_ticker As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =100
                            X: =layout_ticker_5.X + layout_ticker_5.Width
                            ZIndex: =1

                        layout_market As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =120
                            X: =layout_ticker.X + layout_ticker.Width
                            Y: =layout_ticker.Y
                            ZIndex: =2

                        layout_marginRatio As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =180
                            X: =layout_market.X + layout_market.Width
                            Y: =layout_market.Y
                            ZIndex: =3

                        layout_maxQtyAll As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =250
                            X: =layout_marginRatio.X + layout_marginRatio.Width
                            Y: =layout_marginRatio.Y
                            ZIndex: =4

                        layout_maxQtyPer As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =250
                            X: =layout_maxQtyAll.X + layout_maxQtyAll.Width
                            Y: =layout_marginRatio.Y
                            ZIndex: =5

                        layout_MaxPctPer As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =250
                            X: =layout_maxQtyPer.X + layout_maxQtyPer.Width
                            Y: =layout_marginRatio.Y
                            ZIndex: =6

                        layout_MaxPctAll As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =250
                            X: =layout_MaxPctPer.X + layout_MaxPctPer.Width
                            Y: =layout_marginRatio.Y
                            ZIndex: =7

                        label_ticker As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Ticker"
                            Visible: =Parent.Visible
                            Width: =layout_ticker.Width
                            X: =layout_ticker.X
                            Y: =layout_ticker.Y
                            ZIndex: =8

                        label_market As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Market"
                            Visible: =Parent.Visible
                            Width: =layout_market.Width
                            X: =layout_market.X
                            Y: =layout_market.Y
                            ZIndex: =9

                        label_marginRatio As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Margin Ratio"
                            Visible: =Parent.Visible
                            Width: =layout_marginRatio.Width
                            X: =layout_marginRatio.X
                            Y: =layout_market.Y
                            ZIndex: =10

                        label_maxQtyAll As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Max Margined Amt Per Client"
                            Visible: =Parent.Visible
                            Width: =layout_maxQtyAll.Width
                            X: =layout_maxQtyAll.X
                            Y: =layout_maxQtyAll.Y
                            ZIndex: =11

                        label_maxQtyPer As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Max Margined Amt All Client"
                            Visible: =Parent.Visible
                            Width: =layout_maxQtyPer.Width
                            X: =layout_maxQtyPer.X
                            Y: =layout_maxQtyPer.Y
                            ZIndex: =12

                        label_maxPctPer As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Max Margined Qty Per Client"
                            Visible: =Parent.Visible
                            Width: =layout_MaxPctPer.Width
                            X: =layout_MaxPctPer.X
                            Y: =layout_MaxPctPer.Y
                            ZIndex: =13

                        label_maxPctAll As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Max Margined Qty All Client"
                            Visible: =Parent.Visible
                            Width: =layout_MaxPctAll.Width
                            X: =layout_MaxPctAll.X
                            Y: =layout_MaxPctAll.Y
                            ZIndex: =14

                        "Gallery8_8 As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver5.0'":
                            '#CopilotOverlayLabel': ="Filtered"
                            Height: =If(Self.AllItemsCount * Self.TemplateHeight > (Self.TemplateHeight * If(App.Width > 600, 8, 6)), (Self.TemplateHeight * If(App.Width > 600, 8, 6)), Self.AllItemsCount * Self.TemplateHeight)
                            Items: =SortByColumns(If(IsEmpty(listMarginPolicyInput), listIssuerInput, listMarginPolicyInput),"stt")
                            Layout: =Layout.Vertical
                            TemplatePadding: =0
                            TemplateSize: =If(App.Width > 600, 50, 70)
                            Visible: =Parent.Visible
                            Width: =layout_stockLiquidityScore_G.X + layout_stockLiquidityScore_G.Width + 20
                            Y: =layout_ticker.Y + layout_ticker.Height
                            ZIndex: =15

                            layout_tickerFor As rectangle:
                                BorderColor: =If(CountIf(listMarginPolicyInput, stock_id = ThisItem.stock_id) > 1 || IsBlank(label_tickerFor.Text) || !IsMatch(ThisItem.stock_id, "^[a-zA-Z0-9]+$"), Color.Red, RGBA(192, 192, 192, 1))
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =DealDetailTab = 1
                                Width: =layout_ticker.Width
                                X: =layout_NoFor_5.X + layout_NoFor_5.Width
                                ZIndex: =1

                            layout_marketFor As rectangle:
                                BorderColor: =If(!IsMatch(ThisItem.market, "^[a-zA-Z0-9]+$") && !IsBlank(label_marketFor.Text), Color.Red, RGBA(192, 192, 192, 1))
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =DealDetailTab = 1
                                Width: =layout_market.Width
                                X: =layout_tickerFor.X + layout_tickerFor.Width
                                Y: =layout_tickerFor.Y
                                ZIndex: =2

                            layout_marginRatioFor As rectangle:
                                BorderColor: |
                                    =If((!IsBlank(Last(FirstN((Split(ThisItem.margin_ratio,"~")),3)).Value) && !IsMatch(Last(FirstN((Split(ThisItem.margin_ratio,"~")),3)).Value, "^[0-9]+(\.[0-9]+)?$")) ||  Value(Last(FirstN((Split(ThisItem.margin_ratio,"~")),3)).Value) < 0 || Mod(Value(Last(FirstN((Split(ThisItem.margin_ratio,"~")),3)).Value), 5) <> 0 || Value(Last(FirstN((Split(ThisItem.margin_ratio,"~")),3)).Value) > 50
                                        ,
                                        Color.Red,        
                                        RGBA(192, 192, 192, 1)
                                    )
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =DealDetailTab = 1
                                Width: =label_marginRatio.Width
                                X: =layout_marketFor.X + layout_marketFor.Width
                                Y: =layout_marketFor.Y
                                ZIndex: =3

                            layout_maxQtyAllFor As rectangle:
                                BorderColor: |-
                                    =If(!IsNumeric(label_maxQtyAllFor.Text) && !IsBlank(label_maxQtyAllFor.Text) ||
                                        IsNumeric(label_maxQtyAllFor.Text) && Value(label_maxQtyAllFor.Text) > Value(If(IsBlank(label_maxQtyPerFor.Text), "0", label_maxQtyPerFor.Text)),
                                        Color.Red,        
                                        RGBA(192, 192, 192, 1)
                                    )
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =DealDetailTab = 1
                                Width: =layout_maxQtyAll.Width 
                                X: =layout_marginRatioFor.X + layout_marginRatioFor.Width
                                Y: =layout_marginRatioFor.Y
                                ZIndex: =4

                            layout_maxQtyPerFor As rectangle:
                                BorderColor: |-
                                    =If(!IsNumeric(label_maxQtyPerFor.Text) && !IsBlank(label_maxQtyPerFor.Text) ||
                                        IsNumeric(label_maxQtyAllFor.Text) && Value(label_maxQtyAllFor.Text) > Value(If(IsBlank(label_maxQtyPerFor.Text), "0", label_maxQtyPerFor.Text)),
                                        Color.Red,        
                                        RGBA(192, 192, 192, 1)
                                    )
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =DealDetailTab = 1
                                Width: =layout_maxQtyAll.Width 
                                X: =layout_maxQtyAllFor.X + layout_maxQtyAllFor.Width
                                Y: =layout_marginRatioFor.Y
                                ZIndex: =5

                            layout_maxPctPerFor As rectangle:
                                BorderColor: |-
                                    =If(!IsNumeric(label_maxPctPerFor.Text) && !IsBlank(label_maxPctPerFor.Text) ||
                                        IsNumeric(label_maxPctPerFor.Text) && Value(label_maxPctPerFor.Text) > Value(If(IsBlank(label_maxPctAllFor.Text), "0", label_maxPctAllFor.Text)),
                                        Color.Red,        
                                        RGBA(192, 192, 192, 1)
                                    )
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =DealDetailTab = 1
                                Width: =layout_maxQtyAll.Width 
                                X: =layout_maxQtyPerFor.X + layout_maxQtyPerFor.Width
                                Y: =layout_marginRatioFor.Y
                                ZIndex: =6

                            layout_MaxPctAllFor As rectangle:
                                BorderColor: |-
                                    =If(!IsNumeric(label_maxPctAllFor.Text) && !IsBlank(label_maxPctAllFor.Text) ||
                                        IsNumeric(label_maxPctPerFor.Text) && Value(label_maxPctPerFor.Text) > Value(If(IsBlank(label_maxPctAllFor.Text), "0", label_maxPctAllFor.Text)),
                                        Color.Red,        
                                        RGBA(192, 192, 192, 1)
                                    )
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =DealDetailTab = 1
                                Width: =layout_maxQtyAll.Width 
                                X: =layout_maxPctPerFor.X + layout_maxPctPerFor.Width
                                Y: =layout_marginRatioFor.Y
                                ZIndex: =7

                            label_tickerFor As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.stock_id
                                Visible: =DealDetailTab = 1
                                Width: =layout_tickerFor.Width
                                X: =layout_tickerFor.X
                                Y: =layout_tickerFor.Y
                                ZIndex: =8

                            label_marketFor As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.market
                                Visible: =DealDetailTab = 1
                                Width: =layout_marketFor.Width
                                X: =layout_marketFor.X
                                Y: =layout_marketFor.Y
                                ZIndex: =9

                            label_marginRatioFor As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.margin_ratio&"%"
                                Visible: =DealDetailTab = 1
                                Width: =layout_marginRatioFor.Width
                                X: =layout_marginRatioFor.X
                                Y: =layout_marginRatioFor.Y
                                ZIndex: =10

                            label_maxQtyAllFor As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: |-
                                    =//If(IsNumeric(ThisItem.max_margined_amt_per_client), Text(Value(ThisItem.max_margined_amt_per_client), "[$-en-GB]#,###"), ThisItem.max_margined_amt_per_client)
                                    ThisItem.max_margined_amt_per_client
                                Visible: =DealDetailTab = 1
                                Width: =layout_maxQtyAllFor.Width
                                X: =layout_maxQtyAllFor.X
                                Y: =layout_maxQtyAllFor.Y
                                ZIndex: =11

                            label_maxQtyPerFor As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: |-
                                    =//If(IsNumeric(ThisItem.max_margined_amt_all_client), Text(Value(ThisItem.max_margined_amt_all_client), "[$-en-GB]#,###"), ThisItem.max_margined_amt_all_client)
                                    ThisItem.max_margined_amt_all_client
                                Visible: =DealDetailTab = 1
                                Width: =layout_maxQtyPerFor.Width - 1
                                X: =layout_maxQtyPerFor.X
                                Y: =layout_maxQtyPerFor.Y
                                ZIndex: =12

                            label_maxPctPerFor As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: |-
                                    =//If(IsNumeric(ThisItem.max_margined_quantity_per_client), Text(Value(ThisItem.max_margined_quantity_per_client), "[$-en-GB]#,###"), ThisItem.max_margined_quantity_per_client)
                                    ThisItem.max_margined_quantity_per_client
                                Visible: =DealDetailTab = 1
                                Width: =layout_maxPctPerFor.Width
                                X: =layout_maxPctPerFor.X
                                Y: =layout_maxPctPerFor.Y
                                ZIndex: =13

                            label_maxPctAllFor As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: |-
                                    =//If(IsNumeric(ThisItem.max_margined_quantity_all_client), Text(Value(ThisItem.max_margined_quantity_all_client), "[$-en-GB]#,###"), ThisItem.max_margined_quantity_all_client)
                                    ThisItem.max_margined_quantity_all_client
                                Visible: =DealDetailTab = 1
                                Width: =layout_MaxPctAllFor.Width
                                X: =layout_MaxPctAllFor.X
                                Y: =layout_MaxPctAllFor.Y
                                ZIndex: =14

                            layout_NoFor_5 As rectangle:
                                BorderColor: =RGBA(192, 192, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =DealDetailTab = 1
                                Width: =layout_ticker.Width
                                ZIndex: =15

                            label_NoFor_5 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.stt
                                Visible: =DealDetailTab = 1
                                Width: =layout_NoFor_5.Width
                                X: =layout_NoFor_5.X
                                Y: =layout_NoFor_5.Y
                                ZIndex: =16

                            layout_effectiveDate_G As rectangle:
                                BorderColor: |-
                                    =If(!IsBlank(label_effectiveDate_G.Text) 
                                        && (CountRows(Split(label_effectiveDate_G.Text, "/")) <> 3 
                                        || Value(First(Split(label_effectiveDate_G.Text, "/")).Value) > 31 || Value(First(Split(label_effectiveDate_G.Text, "/")).Value) <= 0
                                        || Value(Last(FirstN(Split(label_effectiveDate_G.Text, "/"), 2)).Value) > 12 || Value(Last(FirstN(Split(label_effectiveDate_G.Text, "/"), 2)).Value) <= 0
                                        || Len(Last(Split(label_effectiveDate_G.Text, "/")).Value) <> 4 || Value(First(Split(label_effectiveDate_G.Text, "/")).Value) <= 0)  
                                    //check date
                                        ,
                                        Color.Red,        
                                        RGBA(192, 192, 192, 1)
                                    )
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =DealDetailTab = 1
                                Width: =layout_maxQtyAll.Width 
                                X: =layout_MaxPctAllFor.X + layout_MaxPctAllFor.Width
                                Y: =layout_marginRatioFor.Y
                                ZIndex: =17

                            label_effectiveDate_G As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.effective_date
                                Visible: =DealDetailTab = 1
                                Width: =layout_effectiveDate_G.Width
                                X: =layout_effectiveDate_G.X
                                Y: =layout_effectiveDate_G.Y
                                ZIndex: =18

                            layout_stockLiquidityScore_G As rectangle:
                                BorderColor: |-
                                    =If(!IsBlank(Last(FirstN((Split(label_stockLiquidityScore_G.Text,"~")),3)).Value) && !IsMatch(Last(FirstN((Split(label_stockLiquidityScore_G.Text,"~")),3)).Value, "^[0-9]+(\.[0-9]+)?$") // check only one pointer
                                        ,
                                        Color.Red,        
                                        RGBA(192, 192, 192, 1)
                                    )
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =DealDetailTab = 1
                                Width: =layout_maxQtyAll.Width 
                                X: =layout_effectiveDate_G.X + layout_effectiveDate_G.Width
                                Y: =layout_marginRatioFor.Y
                                ZIndex: =19

                            label_stockLiquidityScore_G As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.stock_liquidity_score
                                Visible: =DealDetailTab = 1
                                Width: =layout_stockLiquidityScore_G.Width
                                X: =layout_stockLiquidityScore_G.X
                                Y: =layout_stockLiquidityScore_G.Y
                                ZIndex: =20

                        layout_ticker_5 As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =100
                            ZIndex: =16

                        label_no_MR As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="No"
                            Visible: =Parent.Visible
                            Width: =layout_ticker_5.Width
                            X: =layout_ticker_5.X
                            Y: =layout_ticker_5.Y
                            ZIndex: =17

                        layout_effectiveDate As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =250
                            X: =layout_MaxPctAll.X + layout_MaxPctAll.Width
                            Y: =layout_marginRatio.Y
                            ZIndex: =18

                        label_effectiveDate As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Effective date"
                            Visible: =Parent.Visible
                            Width: =layout_effectiveDate.Width
                            X: =layout_effectiveDate.X
                            Y: =layout_effectiveDate.Y
                            ZIndex: =19

                        layout_stockLiquidityScore As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =250
                            X: =layout_effectiveDate.X + layout_effectiveDate.Width
                            Y: =layout_marginRatio.Y
                            ZIndex: =20

                        label_stockLiquidityScore As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Stock liquidity score"
                            Visible: =Parent.Visible
                            Width: =layout_stockLiquidityScore.Width
                            X: =layout_stockLiquidityScore.X
                            Y: =layout_stockLiquidityScore.Y
                            ZIndex: =21

            NotAllow_CurrentGroup As group:
                Height: =5
                Width: =5
                X: =-225
                Y: =-330
                ZIndex: =58

                InputDateHere_Label_8 As label:
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Semibold
                    Height: =42
                    Size: =10.5
                    Text: ="Input data here"
                    Visible: =DealDetailTab = 2 && marginPolicyType = 1
                    Width: =120
                    X: =QT_Action_list_stock.X - If(App.Width > 600, 0, - 5)
                    Y: =QT_Action_list_stock.Y + QT_Action_list_stock.Height + 10
                    ZIndex: =24

                TextInput2_7 As text:
                    BorderColor: =RGBA(191, 191, 192, 1)
                    BorderThickness: =1
                    Default: =
                    DisplayMode: =If(isRiskManager, DisplayMode.Edit, DisplayMode.Disabled)
                    FocusedBorderThickness: =1
                    Font: =Font.Arial
                    Height: =42
                    HoverFill: =RGBA(186, 202, 226, 0)
                    Mode: =TextMode.MultiLine
                    OnChange: |
                        =Set(inputChanged, false);
                        Clear(mlInvalidRows);
                        Clear(listMarginUnTradingData);
                        ClearCollect(listMarginUnTradingData, []);
                        ClearCollect(numOrder,0);
                        Set(splitMarginUnTrading,Substitute(Split(Self.Text,Char(10)), Char(9),"~"));
                        ForAll(Filter(splitMarginUnTrading, !IsBlank(Value)) As data1,
                            Collect(numOrder,Last(numOrder).Value+1 );
                            Collect(listMarginUnTradingData,
                                {
                                    market: First(Split(data1.Value,"~")).Value,
                                    ticker: Last(FirstN((Split(data1.Value,"~")),2)).Value,
                                    company_name: Last(FirstN((Split(data1.Value,"~")),3)).Value,
                                    effective_date: Last(FirstN((Split(data1.Value,"~")),4)).Value,
                                    reason: Last(FirstN((Split(data1.Value,"~")),5)).Value,
                                    created_date: "",
                                    group_id: "",
                                    id: "",
                                    order_number: "",
                                    stock_id: "",
                                    stt:Last(numOrder).Value
                                }
                            );
                            If(IsBlank(Last(FirstN((Split(data1.Value,"~")),2)).Value) || // Ticker bắt buộc
                                !IsMatch(Last(FirstN((Split(data1.Value,"~")),2)).Value, "^[a-zA-Z0-9]+$") || // Check special characters
                                !IsBlank(First(Split(data1.Value,"~")).Value) && !IsMatch(First(Split(data1.Value,"~")).Value, "^[a-zA-Z0-9]+$") ||
                                ((CountRows(Split(Last(FirstN((Split(data1.Value,"~")),4)).Value, "/")) <> 3 
                                || Value(First(Split(Last(FirstN((Split(data1.Value,"~")),4)).Value, "/")).Value) > 31 || Value(First(Split(Last(FirstN((Split(data1.Value,"~")),4)).Value, "/")).Value) <= 0
                                || Value(Last(FirstN(Split(Last(FirstN((Split(data1.Value,"~")),4)).Value, "/"), 2)).Value) > 12 || Value(Last(FirstN(Split(Last(FirstN((Split(data1.Value,"~")),4)).Value, "/"), 2)).Value) <= 0
                                || Len(Last(Split(Last(FirstN((Split(data1.Value,"~")),4)).Value, "/")).Value) <> 4 || Value(First(Split(Last(FirstN((Split(data1.Value,"~")),4)).Value, "/")).Value) <= 0)) && !IsBlank(Last(FirstN((Split(data1.Value,"~")),4)).Value) ||
                                CountIf(listMarginUnTradingData, Trim(Last(FirstN((Split(data1.Value,"~")),2)).Value) = Trim(ticker)) > 1 ||
                                CountIf(listMarginUnTradingData, (Trim(Last(FirstN((Split(data1.Value,"~")),3)).Value) = Trim(companny_name)) && !IsBlank(Last(FirstN((Split(data1.Value,"~")),3)).Value)) > 1,
                                Collect(mlInvalidRows, data1))
                        );
                        
                        If(!IsEmpty(listMarginUnTradingData) && !IsBlank(Trim(Self.Text)), Set(inputChanged, true));
                        ClearCollect(listNotAllowInputStock,listMarginUnTradingData);
                        Reset(Self);
                    Size: =10.5
                    Visible: =DealDetailTab = 2 && marginPolicyType = 1
                    Width: =If(Parent.Width > 600, 250, App.Width - InputDateHere_Label_8.Width - 90)
                    X: =InputDateHere_Label_8.X + InputDateHere_Label_8.Width
                    Y: =InputDateHere_Label_8.Y
                    ZIndex: =25

                Container5_5 As groupContainer.verticalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    Height: =Container6_9.Height + 15
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutMode: =LayoutMode.Auto
                    LayoutOverflowX: =LayoutOverflow.Scroll
                    LayoutOverflowY: =LayoutOverflow.Scroll
                    Visible: =DealDetailTab = 2 && marginPolicyType = 1
                    Width: =White_Background_9.Width - 50
                    X: =InputDateHere_Label_8.X
                    Y: =Label_click_out_side_list.Y + Label_click_out_side_list.Height + If(IsEmpty(mlInvalidRows), 10, 40)
                    ZIndex: =26

                    Container6_9 As groupContainer.manualLayoutContainer:
                        DropShadow: =DropShadow.None
                        FillPortions: =0
                        Height: =Gallery8_9.Height + 60
                        LayoutMinHeight: =Gallery8_9.Height + 60
                        LayoutMinWidth: =layout_maxQtyPer_3.X + layout_maxQtyPer_3.Width + 20
                        Visible: =Parent.Visible
                        ZIndex: =2

                        layout_no_list As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =100
                            ZIndex: =1

                        layout_ticker_3 As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =100
                            X: =layout_no_list.X + layout_no_list.Width
                            ZIndex: =2

                        layout_market_2 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =120
                            X: =layout_ticker_3.X + layout_ticker_3.Width
                            Y: =layout_ticker_3.Y
                            ZIndex: =3

                        layout_marginRatio_2 As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =180
                            X: =layout_market_2.X + layout_market_2.Width
                            Y: =layout_market_2.Y
                            ZIndex: =4

                        layout_maxQtyAll_2 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =250
                            X: =layout_marginRatio_2.X + layout_marginRatio_2.Width
                            Y: =layout_marginRatio_2.Y
                            ZIndex: =5

                        layout_maxQtyPer_3 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =250
                            X: =layout_maxQtyAll_2.X + layout_maxQtyAll_2.Width
                            Y: =layout_marginRatio_2.Y
                            ZIndex: =6

                        label_ticker_3 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Market"
                            Visible: =Parent.Visible
                            Width: =layout_ticker_3.Width
                            X: =layout_ticker_3.X
                            Y: =layout_ticker_3.Y
                            ZIndex: =7

                        label_market_2 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Ticker"
                            Visible: =Parent.Visible
                            Width: =layout_market_2.Width
                            X: =layout_market_2.X
                            Y: =layout_market_2.Y
                            ZIndex: =8

                        label_marginRatio_2 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Company name"
                            Visible: =Parent.Visible
                            Width: =layout_marginRatio_2.Width
                            X: =layout_marginRatio_2.X
                            Y: =layout_market_2.Y
                            ZIndex: =9

                        label_maxQtyAll_2 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Effective date"
                            Visible: =Parent.Visible
                            Width: =layout_maxQtyAll_2.Width
                            X: =layout_maxQtyAll_2.X
                            Y: =layout_maxQtyAll_2.Y
                            ZIndex: =10

                        label_maxQtyPer_3 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Reason"
                            Visible: =Parent.Visible
                            Width: =layout_maxQtyPer_3.Width
                            X: =layout_maxQtyPer_3.X
                            Y: =layout_maxQtyPer_3.Y
                            ZIndex: =11

                        label_no_list As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="No"
                            Visible: =Parent.Visible
                            Width: =layout_no_list.Width
                            X: =layout_no_list.X
                            Y: =layout_no_list.Y
                            ZIndex: =12

                        "Gallery8_9 As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver5.0'":
                            '#CopilotOverlayLabel': ="Filtered"
                            Height: =If(Self.AllItemsCount * Self.TemplateHeight > (Self.TemplateHeight * If(App.Width > 600, 8, 6)), (Self.TemplateHeight * If(App.Width > 600, 8, 6)), Self.AllItemsCount * Self.TemplateHeight)
                            Items: =If(CountRows(listNotAllowInputStock) > 0, listNotAllowInputStock, listNotAllowInputApiStock)
                            Layout: =Layout.Vertical
                            TemplatePadding: =0
                            TemplateSize: =If(App.Width > 600, 50, 70)
                            Visible: =Parent.Visible
                            Width: =layout_maxQtyPer_3.X + layout_maxQtyPer_3.Width + 20
                            Y: =layout_ticker_3.Y + layout_ticker_3.Height
                            ZIndex: =13

                            layout_No_list As rectangle:
                                BorderColor: =RGBA(192, 192, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =Parent.Visible
                                Width: =layout_no_list.Width
                                ZIndex: =1

                            layout_tickerFor_3 As rectangle:
                                BorderColor: =If(!IsMatch(ThisItem.market, "^[a-zA-Z0-9]+$") && !IsBlank(label_tickerFor_3.Text), Color.Red, RGBA(192, 192, 192, 1))
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_9.TemplateHeight
                                Visible: =Parent.Visible
                                Width: =layout_ticker_3.Width
                                X: =layout_No_list.X + layout_No_list.Width
                                ZIndex: =2

                            layout_marketFor_2 As rectangle:
                                BorderColor: =If(CountIf(listNotAllowInputStock, ticker = ThisItem.ticker) > 1 || IsBlank(label_marketFor_2.Text) || !IsMatch(ThisItem.ticker, "^[a-zA-Z0-9]+$"), Color.Red, RGBA(192, 192, 192, 1))
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_9.TemplateHeight
                                Visible: =Parent.Visible
                                Width: =layout_market_2.Width
                                X: =layout_tickerFor_3.X + layout_tickerFor_3.Width
                                Y: =layout_tickerFor_3.Y
                                ZIndex: =3

                            layout_marginRatioFor_2 As rectangle:
                                BorderColor: =If(CountIf(listNotAllowInputStock, company_name = ThisItem.company_name) > 1 && !IsBlank(label_marginRatioFor_2.Text), Color.Red, RGBA(192, 192, 192, 1))
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_9.TemplateHeight
                                Visible: =Parent.Visible
                                Width: =label_marginRatio_2.Width
                                X: =layout_marketFor_2.X + layout_marketFor_2.Width
                                Y: =layout_marketFor_2.Y
                                ZIndex: =4

                            layout_maxQtyAllFor_2 As rectangle:
                                BorderColor: |-
                                    =If(!IsBlank(label_maxQtyAllFor_2.Text) 
                                        && (CountRows(Split(label_maxQtyAllFor_2.Text, "/")) <> 3 
                                        || Value(First(Split(label_maxQtyAllFor_2.Text, "/")).Value) > 31 || Value(First(Split(label_maxQtyAllFor_2.Text, "/")).Value) <= 0
                                        || Value(Last(FirstN(Split(label_maxQtyAllFor_2.Text, "/"), 2)).Value) > 12 || Value(Last(FirstN(Split(label_maxQtyAllFor_2.Text, "/"), 2)).Value) <= 0
                                        || Len(Last(Split(label_maxQtyAllFor_2.Text, "/")).Value) <> 4 || Value(First(Split(label_maxQtyAllFor_2.Text, "/")).Value) <= 0)  
                                    //check date
                                        ,
                                        Color.Red,        
                                        RGBA(192, 192, 192, 1)
                                    )
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_9.TemplateHeight
                                Visible: =Parent.Visible
                                Width: =layout_maxQtyAll_2.Width 
                                X: =layout_marginRatioFor_2.X + layout_marginRatioFor_2.Width
                                Y: =layout_marginRatioFor_2.Y
                                ZIndex: =5

                            layout_maxQtyPerFor_3 As rectangle:
                                BorderColor: =RGBA(191, 191, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_9.TemplateHeight
                                Visible: =Parent.Visible
                                Width: =layout_maxQtyAll_2.Width 
                                X: =layout_maxQtyAllFor_2.X + layout_maxQtyAllFor_2.Width
                                Y: =layout_marginRatioFor_2.Y
                                ZIndex: =6

                            label_NoFor_6 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.stt
                                Visible: =Parent.Visible
                                Width: =layout_No_list.Width
                                X: =layout_No_list.X
                                Y: =layout_No_list.Y
                                ZIndex: =7

                            label_tickerFor_3 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_9.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.market
                                Visible: =Parent.Visible
                                Width: =layout_tickerFor_3.Width
                                X: =layout_tickerFor_3.X
                                Y: =layout_tickerFor_3.Y
                                ZIndex: =8

                            label_marketFor_2 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_9.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.ticker
                                Visible: =Parent.Visible
                                Width: =layout_marketFor_2.Width
                                X: =layout_marketFor_2.X
                                Y: =layout_marketFor_2.Y
                                ZIndex: =9

                            label_marginRatioFor_2 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_9.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.company_name
                                Visible: =Parent.Visible
                                Width: =layout_marginRatioFor_2.Width
                                X: =layout_marginRatioFor_2.X
                                Y: =layout_marginRatioFor_2.Y
                                ZIndex: =10

                            label_maxQtyAllFor_2 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_9.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.effective_date
                                Visible: =Parent.Visible
                                Width: =layout_maxQtyAllFor_2.Width
                                X: =layout_maxQtyAllFor_2.X
                                Y: =layout_maxQtyAllFor_2.Y
                                ZIndex: =11

                            label_maxQtyPerFor_3 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_9.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.reason
                                Visible: =Parent.Visible
                                Width: =layout_maxQtyPerFor_3.Width
                                X: =layout_maxQtyPerFor_3.X
                                Y: =layout_maxQtyPerFor_3.Y
                                ZIndex: =12

            Equity_TabsGroup As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =58

                HrQT2_10 As rectangle:
                    BorderColor: =RGBA(176, 176, 176, 1)
                    Fill: =RGBA(191, 191, 192, 1)
                    Height: =1
                    Visible: =marginPolicyType = 3
                    Width: =If(App.Width > 600, layout_maxQtyAll_2.X + layout_maxQtyAll_2.Width - Self.X - If(App.Width > 600, 0, 10), QT2Tabs_9.AllItemsCount * QT2Tabs_9.TemplateWidth - 7)
                    X: =QT2Tabs_9.X + If(App.Width > 600, 0, 5)
                    Y: =QT2Tabs_9.Y + QT2Tabs_9.Height - 7
                    ZIndex: =46

                QT2Tabs_9 As gallery.galleryHorizontal:
                    '#CopilotOverlayLabel': ="Filtered"
                    DelayItemLoading: =true
                    Height: =47
                    Items: |-
                        =[{text: "Current equity", tab: 1},
                        {text: "History equity", tab: 3}]
                    LoadingSpinner: =LoadingSpinner.Data
                    ShowScrollbar: =false
                    TemplatePadding: =0
                    TemplateSize: =180
                    Visible: =marginPolicyType = 3
                    Width: =If(Parent.Width > 600,White_Background_9.Width - 50, Parent.Width - 30)
                    X: =White_Background_9.X + If(App.Width > 600, 20, 10)
                    Y: =300
                    ZIndex: =47

                    Button8_10 As button:
                        BorderStyle: =BorderStyle.None
                        Color: =If(DealDetailTab = ThisItem.tab, RGBA(14, 63, 115, 1), RGBA(176, 176, 176, 1))
                        Fill: =RGBA(0, 0, 0, 0)
                        Font: =Font.Arial
                        Height: =35
                        HoverColor: =If(DealDetailTab = ThisItem.tab, RGBA(14, 63, 115, 1), RGBA(176, 176, 176, 1))
                        HoverFill: =Self.Fill
                        OnSelect: |-
                            =Set(DealDetailTab, ThisItem.tab);
                            Set(inputChanged, false);
                            
                            Set(isLoading, true);
                            Switch(DealDetailTab, 1,
                                Clear(listMarginPolicyInput);
                                ClearCollect(PolicyList1, 'TVS->GetCurrentPolicyList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).listCurrentPolicy);
                                ClearCollect(listIssuerInput, PolicyList1);,
                                3,
                                ClearCollect(listItemEquity,'TVS->FindAllEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,Text(DateFrom_Datepicker_11.SelectedDate, "yyyy-mm-dd hh:mm:ss"),Text(DateTo_DatePicker_11.SelectedDate, "yyyy-mm-dd hh:mm:ss"),PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                            );
                            Set(isLoading, false);
                            
                            Set(DetailIssuerInMRHistory, Blank());
                            Reset(TextInput2_7);
                        PaddingLeft: =0
                        PaddingRight: =0
                        PressedFill: =Self.Fill
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =If(App.Width > 600, 12, 10.5)
                        Text: =ThisItem.text
                        Tooltip: =ThisItem.text
                        Width: =180
                        Y: =5
                        ZIndex: =1

                    BottomBorder1_17 As rectangle:
                        BorderColor: =If(DealDetailTab = ThisItem.tab, RGBA(14,63,115,1),RGBA(176, 176, 176, 1))
                        BorderThickness: =If(DealDetailTab = ThisItem.tab, 2, 0)
                        Fill: =RGBA(246, 246, 246, 1)
                        Height: =If(ThisItem.tab = DealDetailTab, 2, 0)
                        Width: =178
                        Y: =40
                        ZIndex: =2

            Equity_Tab1Group As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =64

                Equity_Label As label:
                    Font: =Font.Arial
                    Height: =42
                    Size: =10.5
                    Text: ="TVS's equity"
                    Visible: =DealDetailTab = 3 && marginPolicyType = 1
                    Width: =120
                    X: =QT_Action_list_stock.X
                    Y: =QT_Action_list_stock.Y + QT_Action_list_stock.Height + 10
                    ZIndex: =48

                Equity_Input As text:
                    BorderColor: =RGBA(191, 191, 192, 1)
                    BorderThickness: =1
                    Default: =equityAmountFormatted
                    DisplayMode: =If(isRiskManager, DisplayMode.Edit, DisplayMode.Disabled)
                    FocusedBorderColor: =RGBA(0, 18, 107, 1)
                    FocusedBorderThickness: =1
                    Font: =Font.Arial
                    Height: =44
                    HoverFill: =RGBA(186, 202, 226, 0)
                    OnChange: |-
                        =If(Len(Self.Text) = 0,
                           Set(equityAmountFormatted, Blank()); Reset(Self),
                            Set(inputChanged, true);
                            IsNumeric(Substitute(Self.Text, ",","")) && Value(Substitute(Self.Text, ",","")) > 0,
                            Set(equityAmountFormatted, Substitute(Self.Text, ",","")),
                            Set(equityAmountFormatted, Blank()); Reset(Self));
                    PaddingRight: =50
                    PressedBorderColor: =RGBA(0, 18, 107, 1)
                    Size: =10.5
                    Visible: =DealDetailTab = 3 && marginPolicyType = 1
                    Width: =If(App.Width > 800, 300, App.Width - 30 - Self.X)
                    X: =Equity_Label.X + Equity_Label.Width
                    Y: =Equity_Label.Y
                    ZIndex: =49

                VND_Label As label:
                    Align: =Align.Center
                    Color: =RGBA(0,0,0,1)
                    Font: =Font.Arial
                    Height: =input_limit_aum.Height
                    PaddingBottom: =0
                    PaddingLeft: =0
                    PaddingRight: =0
                    PaddingTop: =0
                    Size: =10.5
                    Text: ="billion VND"
                    Visible: =DealDetailTab = 3 && marginPolicyType = 1
                    Width: =80
                    X: =Equity_Input.X + Equity_Input.Width - Self.Width
                    Y: =Equity_Input.Y
                    ZIndex: =50

            Container_Tab_Margin As groupContainer.horizontalAutoLayoutContainer:
                DropShadow: =DropShadow.None
                Height: =60
                LayoutMode: =LayoutMode.Auto
                LayoutOverflowX: =LayoutOverflow.Scroll
                Width: =White_Background_9.Width - 50
                X: =White_Background_9.X + If(App.Width > 600, 20, 10)
                Y: =White_Background_9.Y + 20
                ZIndex: =69

                Container8_1 As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.None
                    FillPortions: =0
                    Height: =60
                    LayoutMinHeight: =100
                    LayoutMinWidth: =250
                    Width: =TVS_Equity_Tab.Width + ListNotAllowTab_2.Width + TVS_Margin_Tab.Width + 5
                    ZIndex: =1

                    TVS_Margin_Tab As button:
                        BorderColor: =Self.Color
                        BorderThickness: =1
                        Color: =If(DealDetailTab = 1, RGBA(14, 63, 115, 1), RGBA(176, 176, 176, 1))
                        Fill: =RGBA(0, 0, 0, 0)
                        FocusedBorderThickness: =1
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Bold
                        HoverColor: =Self.Color
                        HoverFill: =Self.Fill
                        OnSelect: |-
                            =Set(tabTemp, 1);
                            
                            If(inputChanged,
                                Set(showPopupChangeData, true);,
                                Set(DealDetailTab, 1);
                               // Clear(mlInvalidRows);
                                Set(inputChanged, false);
                                Set(marginPolicyType, 1);
                              //  Clear(listMarginPolicyInput);
                              //  Concurrent(
                              //  ClearCollect(PolicyList1, 'TVS->GetCurrentPolicyList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).listCurrentPolicy),
                              //  ClearCollect(MarginPolicyHistory, 'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open, resKeyOpenAll.close, "", "", 10, 0, envDEV, envTEST, envUAT1, envUAT2)));
                                ClearCollect(listIssuerInput, First(MarginPolicyCurrent).listCurrentPolicy);
                                ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                                Set(pageCount,First(MarginPolicyHistory.pageCount).pageCount);
                            
                                Concurrent(
                                ClearCollect(MarginPolicyCurrent, 'TVS->GetCurrentPolicyList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2)), 
                                ClearCollect(MarginPolicyHistory,'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open, resKeyOpenAll.close, "", "", 10, 0, envDEV, envTEST, envUAT1, envUAT2)));
                            
                                ClearCollect(listIssuerInput, First(MarginPolicyCurrent).listCurrentPolicy);
                                ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                                Set(pageCount,First(MarginPolicyHistory.pageCount).pageCount);
                            );
                            
                            Select(Refresh_Margin_po_tab1);
                        PressedBorderColor: =Self.BorderColor
                        PressedColor: =Self.Color
                        PressedFill: =Self.Fill
                        RadiusBottomLeft: =8
                        RadiusBottomRight: =0
                        RadiusTopLeft: =8
                        RadiusTopRight: =0
                        Size: =If(App.Width > 600, 12, 10.5)
                        TabIndex: =If(DealDetailTab = 1, 9999, 0)
                        Text: ="Margin policy"
                        Width: =130
                        X: =2
                        Y: =5
                        ZIndex: =1

                    ListNotAllowTab_2 As button:
                        BorderColor: =Self.Color
                        BorderThickness: =1
                        Color: =If(DealDetailTab = 2, RGBA(14, 63, 115, 1), RGBA(176, 176, 176, 1))
                        Fill: =RGBA(0, 0, 0, 0)
                        FocusedBorderThickness: =1
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Bold
                        HoverColor: =Self.Color
                        HoverFill: =Self.Fill
                        OnSelect: |-
                            =Set(tabTemp, 2);
                            
                            If(inputChanged,
                                Set(showPopupChangeData, true);,
                                Clear(mlInvalidRows);
                                Set(inputChanged, false);
                            	Set(marginPolicyType, 1);
                                Set(DealDetailTab, 2);
                                ClearCollect(listNotAllowInputApiStock, listItemUntradingCurrent);
                                ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                            
                                Concurrent(
                                ClearCollect(listItemUntradingCurrent, 'TVS->GetCurrentUnTradingList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).listUnTrading),   
                                ClearCollect(listItemUnTradingHistory,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,     envUAT2)));
                            
                                ClearCollect(listNotAllowInputApiStock, listItemUntradingCurrent);
                                ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                                
                                ClearCollect(listNotAllowInputStock, Blank());
                            );
                        PressedBorderColor: =Self.BorderColor
                        PressedColor: =Self.Color
                        PressedFill: =Self.Fill
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =If(App.Width > 600, 12, 10.5)
                        TabIndex: =If(DealDetailTab = 2, 9999, 0)
                        Text: ="List of stocks are not allowed for margin trading"
                        Width: =390
                        X: =TVS_Margin_Tab.X + TVS_Margin_Tab.Width + If(DealDetailTab = 1, 0.5, 0)
                        Y: =TVS_Margin_Tab.Y
                        ZIndex: =2

                    TVS_Equity_Tab As button:
                        BorderColor: =Self.Color
                        BorderThickness: =1
                        Color: =If(DealDetailTab = 3, RGBA(14, 63, 115, 1), RGBA(176, 176, 176, 1))
                        Fill: =RGBA(0, 0, 0, 0)
                        FocusedBorderThickness: =1
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Bold
                        HoverColor: =Self.Color
                        HoverFill: =Self.Fill
                        OnSelect: |-
                            =Set(tabTemp, 3);
                            
                            If(inputChanged,
                            Set(showPopupChangeData, true);,
                            Set(marginPolicyType, 1);
                            Set(DealDetailTab, 3);
                            
                            Set(equityAmountFormatted, Text(Value(equityCurrent)));
                            ClearCollect(listItemEquity, First(listEquityHistory).listItem);
                            
                            Concurrent(
                            Set(equityCurrent, 'TVS->FindCurrentEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).equity),
                            ClearCollect(listEquityHistory,'TVS->FindAllEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2)));
                            
                            Set(equityAmountFormatted, Text(Value(equityCurrent)));
                            ClearCollect(listItemEquity, First(listEquityHistory).listItem);
                            
                            Set(equityAmountValueOld, Value(Substitute(Substitute(equityAmountFormatted, ",", ""), ".", ""))))
                        PressedBorderColor: =Self.BorderColor
                        PressedColor: =Self.Color
                        PressedFill: =Self.Fill
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =8
                        RadiusTopLeft: =0
                        RadiusTopRight: =8
                        Size: =If(App.Width > 600, 12, 10.5)
                        TabIndex: =If(DealDetailTab = 3, 9999, 0)
                        Text: ="TVS's equity"
                        Width: =120
                        X: =ListNotAllowTab_2.X + ListNotAllowTab_2.Width + If(DealDetailTab = 2, 0.5, 0)
                        Y: =TVS_Margin_Tab.Y
                        ZIndex: =3

            btnRefresh_Margin_po_tab1 As button:
                BorderThickness: =0
                DisabledColor: =Self.Color
                DisabledFill: =Self.Fill
                Fill: =RGBA(17, 79, 144, 1)
                FocusedBorderThickness: =0
                Font: =Font.Arial
                FontWeight: =FontWeight.Normal
                Height: =44
                OnSelect: |-
                    =Clear(listIssuerInput);
                    Clear(mlInvalidRows);
                    Set(isLoading, true);
                    Set(inputChanged, false);
                    ClearCollect(PolicyList1, 'TVS->GetCurrentPolicyList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).listCurrentPolicy);
                    ClearCollect(listMarginPolicyInput, PolicyList1);
                    Set(isLoading, false);
                PaddingBottom: =10
                PaddingLeft: =30
                PaddingRight: =10
                PaddingTop: =10
                PressedColor: =Self.Color 
                PressedFill: =Self.Fill
                Size: =10.5
                Text: =""
                Tooltip: ="Click here to clear data"
                Visible: =DealDetailTab = 1 && marginPolicyType = 1
                Width: =44
                X: =TextInput2_6.X + TextInput2_6.Width + 10
                Y: =TextInput2_6.Y
                ZIndex: =70

            Refresh_Margin_po_tab1 As icon.Reload:
                Color: =RGBA(255, 255, 255, 1)
                Height: =20
                Icon: =Icon.Reload
                OnSelect: =Select(btnRefresh_Margin_po_tab1);
                Tooltip: ="Click here to clear data"
                Visible: =DealDetailTab = 1 && marginPolicyType = 1
                Width: =20
                X: =btnRefresh_Margin_po_tab1.X + 12
                Y: =btnRefresh_Margin_po_tab1.Y + btnRefresh_Margin_po_tab1.Height * 0.5 - Self.Height*0.5
                ZIndex: =71

            SearchAUMButton_16 As button:
                BorderThickness: =0
                DisabledColor: =Self.Color
                DisabledFill: =Self.Fill
                Fill: =RGBA(17, 79, 144, 1)
                FocusedBorderThickness: =0
                Font: =Font.Arial
                FontWeight: =FontWeight.Normal
                Height: =45
                OnSelect: |-
                    =UpdateContext({ShowNotification: false});
                    If(DateDiff(If(DealDetailTab = 1 && marginPolicyType = 2, DateFrom_Datepicker_11.SelectedDate, DateFrom_Datepicker_9.SelectedDate), If(DealDetailTab = 1 && marginPolicyType = 2, DateTo_DatePicker_11.SelectedDate, DateTo_DatePicker_9.SelectedDate)) < 0,
                    Set(NoticationText, "The from date cannot be greater than the to date!"); Set(IsError, true); UpdateContext({ShowNotification: true}),
                    If(DealDetailTab = 1 && marginPolicyType = 2,
                        ClearCollect(MarginPolicyHistory,'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open,resKeyOpenAll.close,Text(DateFrom_Datepicker_11.SelectedDate, "yyyy-mm-dd"),Text(DateTo_DatePicker_11.SelectedDate, "yyyy-mm-dd"), PageSizeNumber, currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                        Set(pageCount,First(MarginPolicyHistory).pageCount));
                        
                    If(DealDetailTab = 2 && marginPolicyType = 2, 
                        ClearCollect(listItemUnTradingHistory,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,Text(DateFrom_Datepicker_9.SelectedDate, "yyyy-mm-dd"),Text(DateTo_DatePicker_9.SelectedDate, "yyyy-mm-dd"),PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                        Set(pageCount,First(listItemUnTradingHistory).pageCount);
                        ClearCollect(listRes1Client,listItemUnTrading));
                    
                    Set(pageIndexFirst, 5*RoundDown(currentPageIndex/5, 0));
                    Clear(listPageIndex);
                    ClearCollect(listPageIndex, pageIndexFirst);
                    Set(pageIndexFirst, 5*RoundDown(currentPageIndex/5, 0));
                    
                    
                    ForAll(
                        maxList,
                        If(Last(listPageIndex).Value + 1 < pageCount,
                            Collect(listPageIndex,Last(listPageIndex).Value + 1);
                        );
                    ))
                PaddingBottom: =10
                PaddingLeft: =30
                PaddingRight: =10
                PaddingTop: =10
                PressedColor: =Self.Color 
                PressedFill: =Self.Fill
                Size: =10.5
                Text: =""
                Visible: =(DealDetailTab = 1 || DealDetailTab = 2) && marginPolicyType = 2
                Width: =44
                X: |-
                    =If(App.Width <= 800, App.Width - 118,
                        DateTo_DatePicker_11.Visible, DateTo_DatePicker_11.X + DateTo_DatePicker_11.Width + 20,
                        DateTo_InputBack_8.X + DateTo_InputBack_8.Width + 20
                    )
                Y: |-
                    =// If(DealDetailTab = 1 && marginPolicyType = 2, DateTo_DatePicker_5.Y, DateTo_InputBack_5.Y)
                    btnRefresh_mr_tab_2.Y
                ZIndex: =72

            SearchAUMIcon_mr_tab_2 As htmlViewer:
                Font: =Font.Arial
                Height: =35
                HtmlText: |-
                    ="<div style=""display:flex;align-items:center; justify-content: center;; cursor: pointer; width: 30px; height: "&Self.Height - 2&"px""; padding: 5px""><svg xmlns=""http://www.w3.org/2000/svg"" width=""21"" height=""20"" viewBox=""0 0 21 20"" fill=""none"">
                      <path d=""M19.5002 19.0002L15.1572 14.6572M15.1572 14.6572C15.9001 13.9143 16.4894 13.0324 16.8914 12.0618C17.2935 11.0911 17.5004 10.0508 17.5004 9.00021C17.5004 7.9496 17.2935 6.90929 16.8914 5.93866C16.4894 4.96803 15.9001 4.08609 15.1572 3.34321C14.4143 2.60032 13.5324 2.01103 12.5618 1.60898C11.5911 1.20693 10.5508 1 9.50021 1C8.4496 1 7.40929 1.20693 6.43866 1.60898C5.46803 2.01103 4.58609 2.60032 3.84321 3.34321C2.34288 4.84354 1.5 6.87842 1.5 9.00021C1.5 11.122 2.34288 13.1569 3.84321 14.6572C5.34354 16.1575 7.37842 17.0004 9.50021 17.0004C11.622 17.0004 13.6569 16.1575 15.1572 14.6572Z"" stroke=""white"" stroke-width=""2"" stroke-linecap=""round"" stroke-linejoin=""round""/>
                    </svg><div>"
                OnSelect: =Select(SearchAUMButton_16);
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Visible: =(DealDetailTab = 1 || DealDetailTab = 2) && marginPolicyType = 2
                Width: =30
                X: =SearchAUMButton_16.X + 6
                Y: =SearchAUMButton_16.Y + 4
                ZIndex: =73

            btnRefresh_mr_tab_2 As button:
                BorderThickness: =0
                DisabledColor: =Self.Color
                DisabledFill: =Self.Fill
                Fill: =RGBA(17, 79, 144, 1)
                FocusedBorderThickness: =0
                Font: =Font.Arial
                FontWeight: =FontWeight.Normal
                Height: =44
                OnSelect: |-
                    =
                    If(DealDetailTab = 1 && marginPolicyType = 2,
                        Reset(DateFrom_Datepicker_11);
                        Reset(DateTo_DatePicker_11);
                        ClearCollect(MarginPolicyHistory,'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"", "", PageSizeNumber, currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                        Set(pageCount,First(MarginPolicyHistory).pageCount));
                        
                    If(DealDetailTab = 2 && marginPolicyType = 2, 
                        Reset(DateFrom_Datepicker_9);
                        Reset(DateTo_DatePicker_9);
                        ClearCollect(listItemUnTradingHistory,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"", "",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                        Set(pageCount,First(listItemUnTradingHistory).pageCount);
                        ClearCollect(listRes1Client,listItemUnTrading););
                    
                    If(DealDetailTab = 3 && marginPolicyType = 2,
                        Reset(DateFrom_Datepicker_10);
                        Reset(DateTo_DatePicker_10); 
                        ClearCollect(listEquityHistory,'TVS->FindAllEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"", "",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(listItemEquity, First(listEquityHistory).listItem);
                        Set(pageCount,First(listEquityHistory).pageCount));
                    
                    Set(pageIndexFirst, 5*RoundDown(currentPageIndex/5, 0));
                    Clear(listPageIndex);
                    ClearCollect(listPageIndex, pageIndexFirst);
                    Set(pageIndexFirst, 5*RoundDown(currentPageIndex/5, 0));
                    
                    
                    ForAll(
                        maxList,
                        If(Last(listPageIndex).Value + 1 < pageCount,
                            Collect(listPageIndex,Last(listPageIndex).Value + 1);
                        );
                    );
                PaddingBottom: =10
                PaddingLeft: =30
                PaddingRight: =10
                PaddingTop: =10
                PressedColor: =Self.Color 
                PressedFill: =Self.Fill
                Size: =10.5
                Text: =""
                Tooltip: ="Click here to clear filters"
                Visible: =(DealDetailTab = 1 || DealDetailTab = 2) && marginPolicyType = 2
                Width: =44
                X: =SearchAUMButton_16.X + SearchAUMButton_16.Width + 10
                Y: |-
                    =If(DateTo_InputBack_8.Visible,
                        DateTo_InputBack_8.Y + If(App.Width > 800, 0,  DateTo_InputBack_8.Height + 10),
                        DateTo_InputBack_10.Y + If(App.Width > 800, 0,  DateTo_InputBack_8.Height + 10)
                    )
                ZIndex: =74

            RefreshListIcon_mr_tab_2 As icon.Reload:
                Color: =RGBA(255, 255, 255, 1)
                Height: =20
                Icon: =Icon.Reload
                OnSelect: =Select(btnRefresh_mr_tab_2);
                Tooltip: ="Click here to clear filters"
                Visible: =(DealDetailTab = 1 || DealDetailTab = 2) && marginPolicyType = 2
                Width: =20
                X: =btnRefresh_mr_tab_2.X + RefreshListIcon_mr_tab_2.Width * 0.5
                Y: =btnRefresh_mr_tab_2.Y + btnRefresh_mr_tab_2.Height * 0.5 - Self.Height*0.5
                ZIndex: =75

            QT_Action_list_stock As groupContainer.horizontalAutoLayoutContainer:
                DropShadow: =DropShadow.None
                Height: =52
                LayoutMode: =LayoutMode.Auto
                LayoutOverflowX: =LayoutOverflow.Scroll
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Width: =Container_Tab_Margin.Width
                X: =White_Background_9.X + If(App.Width > 600, 20, 10)
                Y: =Container_Tab_Margin.Y + Container_Tab_Margin.Height
                ZIndex: =76

                MR_Tab1 As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.None
                    FillPortions: =0
                    LayoutMinHeight: =47
                    LayoutMinWidth: =250
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Width: =If(DealDetailTab = 1, 150, 100)
                    ZIndex: =1

                    Button8_35 As button:
                        BorderStyle: =BorderStyle.None
                        Color: =If(marginPolicyType = 1, RGBA(14, 63, 115, 1), RGBA(176, 176, 176, 1))
                        DisabledColor: =Self.Color
                        DisabledFill: =RGBA(0, 0, 0, 0)
                        Fill: =RGBA(0, 0, 0, 0)
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Bold
                        Height: =35
                        HoverColor: =If(DealDetailTab = 1, RGBA(14, 63, 115, 1), RGBA(176, 176, 176, 1))
                        HoverFill: =RGBA(0, 0, 0, 0)
                        OnSelect: |-
                            =Set(marginPolicyType, 1);
                            Set(inputChanged, false);
                            Set(currentPageIndex, 0);
                            
                            //margin policy
                            If(DealDetailTab = 1, 
                            Switch(marginPolicyType, 
                                    1,
                                    ClearCollect(listIssuerInput, First(MarginPolicyCurrent).listCurrentPolicy);
                                    ClearCollect(MarginPolicyCurrent, 'TVS->GetCurrentPolicyList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2));
                                    ClearCollect(listIssuerInput, First(MarginPolicyCurrent).listCurrentPolicy),
                                    2,
                                    ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                                    ClearCollect(listItemUnTradingHistory,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                                    ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                            ));
                            
                            //untrading
                            If(DealDetailTab = 2, 
                            Switch(marginPolicyType, 
                                    1,
                                    ClearCollect(listItemUntradingCurrent,listNotAllowInputApiStock);
                                    ClearCollect(listNotAllowInputApiStock, 'TVS->GetCurrentUnTradingList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).listUnTrading);
                                    ClearCollect(listItemUntradingCurrent,listNotAllowInputApiStock),
                                    2,
                                    ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                                ClearCollect(listItemUnTradingHistory,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                                    ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                                    ClearCollect(listRes1Client,listItemUnTrading);
                            ));
                            
                            //equity
                            If(DealDetailTab = 3, 
                            Switch(marginPolicyType, 
                                    1,
                                    Set(equityAmountFormatted, equityCurrent);
                                    Set(equityCurrent, 'TVS->FindCurrentEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).equity);
                                    Set(equityAmountFormatted, equityCurrent),
                                    2,
                                    ClearCollect(listItemEquity, listEquityHistory);
                                    ClearCollect(listEquityHistory,'TVS->FindAllEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                                    ClearCollect(listItemEquity, listEquityHistory);
                            ));
                            
                            Set(DetailIssuerInMRHistory, Blank());
                            Reset(TextInput2_7);
                            Set(maxList,[1,2,3,4]);
                            Set(pageIndexFirst, 5*RoundDown(currentPageIndex/5, 0));
                            ClearCollect(listPageIndex, pageIndexFirst);
                            
                            ForAll(maxList,If(Last(listPageIndex).Value + 1 < pageCount,Collect(listPageIndex,Last(listPageIndex).Value + 1);););
                            If(Refresh_Margin_po_tab1.Visible, Select(Refresh_Margin_po_tab1));
                            If(RefreshListIcon_mr_tab_3.Visible, Select(RefreshListIcon_mr_tab_3));
                        PaddingLeft: =0
                        PaddingRight: =0
                        PressedBorderColor: =Self.Color
                        PressedColor: =Self.Color
                        PressedFill: =RGBA(0, 0, 0, 0)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =If(App.Width > 600, 10.5, 10.5)
                        Text: =If(DealDetailTab = 1, "Current Margin policy", "Current list")
                        Tooltip: =If(DealDetailTab = 1, "Current Margin policy", "Current list")
                        Width: =Parent.Width
                        Y: =3
                        ZIndex: =1

                    BottomBorder1_42 As rectangle:
                        BorderColor: =If(marginPolicyType = 1, RGBA(14,63,115,1),RGBA(176, 176, 176, 1))
                        BorderThickness: =If(marginPolicyType = 1, 2, 0)
                        Fill: =RGBA(246, 246, 246, 1)
                        Height: =If(marginPolicyType = 1, 2, 0)
                        Width: =Parent.Width
                        Y: =38
                        ZIndex: =2

                Mr_Tab2 As groupContainer.manualLayoutContainer:
                    AlignInContainer: =AlignInContainer.SetByContainer
                    DropShadow: =DropShadow.None
                    FillPortions: =0
                    LayoutMinHeight: =47
                    LayoutMinWidth: =250
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Width: =If(DealDetailTab = 1, 180, 100)
                    ZIndex: =2

                    Button8_36 As button:
                        BorderStyle: =BorderStyle.None
                        Color: =If(marginPolicyType = 2, RGBA(14, 63, 115, 1), RGBA(176, 176, 176, 1))
                        DisabledBorderColor: =Self.Color
                        DisabledColor: =Self.Color
                        DisabledFill: =RGBA(0, 0, 0, 0)
                        Fill: =RGBA(0, 0, 0, 0)
                        Font: =Font.Arial
                        FontWeight: =FontWeight.Bold
                        Height: =35
                        HoverColor: =If(DealDetailTab = 3, RGBA(14, 63, 115, 1), RGBA(176, 176, 176, 1))
                        HoverFill: =RGBA(0, 0, 0, 0)
                        OnSelect: |-
                            =Set(marginPolicyType, 2);
                            Set(inputChanged, false);
                            Set(currentPageIndex, 0);
                            
                            Reset(DateFrom_Datepicker_11);
                            Reset(DateTo_DatePicker_11);
                            Reset(DateFrom_Datepicker_9);
                            Reset(DateTo_DatePicker_9);
                            Reset(DateFrom_Datepicker_10);
                            Reset(DateTo_DatePicker_10);
                            
                            //margin policy
                            If(DealDetailTab = 1, 
                            Switch(marginPolicyType, 
                                    1,
                                    ClearCollect(listIssuerInput, First(MarginPolicyCurrent).listCurrentPolicy);
                                    ClearCollect(MarginPolicyCurrent, 'TVS->GetCurrentPolicyList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2));
                                    ClearCollect(listIssuerInput, First(MarginPolicyCurrent).listCurrentPolicy),
                                    2,
                                    ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                                    ClearCollect(MarginPolicyHistory,'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                                    ClearCollect(listDataHistoryPolici, First(MarginPolicyHistory).listItem);
                                    Set(pageCount,First(MarginPolicyHistory).pageCount);
                            ));
                            
                            //untrading
                            If(DealDetailTab = 2, 
                            Switch(marginPolicyType, 
                                    1,
                                    ClearCollect(listItemUntradingCurrent,listNotAllowInputApiStock);
                                    ClearCollect(listNotAllowInputApiStock, 'TVS->GetCurrentUnTradingList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).listUnTrading);
                                    ClearCollect(listItemUntradingCurrent,listNotAllowInputApiStock),
                                    2,
                                    ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                                ClearCollect(listItemUnTradingHistory,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                                    ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                                    Set(pageCount,First(listItemUnTradingHistory).pageCount);
                                    ClearCollect(listRes1Client,listItemUnTrading);
                            ));
                            
                            //equity
                            If(DealDetailTab = 3, 
                            Switch(marginPolicyType, 
                                    1,
                                    Set(equityAmountFormatted, equityCurrent);
                                    Set(equityCurrent, 'TVS->FindCurrentEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).equity);
                                    Set(equityAmountFormatted, equityCurrent),
                                    2,
                                    ClearCollect(listItemEquity, First(listEquityHistory).listItem);
                                    ClearCollect(listEquityHistory,'TVS->FindAllEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                                    ClearCollect(listItemEquity, First(listEquityHistory).listItem);
                                    Set(pageCount,First(listEquityHistory).pageCount);
                            ));
                            
                            Set(DetailIssuerInMRHistory, Blank());
                            Set(HistorySelectedItemSTT, Blank());
                            Set(HistorySelectedItemSTT1, Blank());
                            Reset(TextInput2_7);
                            
                            //pageIndex
                            Set(maxList,[1,2,3,4]);
                            
                            Set(pageIndexFirst, 5*RoundDown(currentPageIndex/5, 0));
                            ClearCollect(listPageIndex, pageIndexFirst);
                            
                            ForAll(maxList,If(Last(listPageIndex).Value + 1 < pageCount,Collect(listPageIndex,Last(listPageIndex).Value + 1)));
                        PaddingLeft: =0
                        PaddingRight: =0
                        PressedBorderColor: =Self.Color
                        PressedColor: =Self.Color
                        PressedFill: =RGBA(0, 0, 0, 0)
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Size: =If(App.Width > 600, 10.5, 10.5)
                        Text: =If(DealDetailTab = 1, "History Margin policy", "History list")
                        Tooltip: =If(DealDetailTab = 1, "History Margin policy", "History list")
                        Width: =Parent.Width
                        Y: =3
                        ZIndex: =1

                    BottomBorder1_43 As rectangle:
                        BorderColor: =If(marginPolicyType = 2, RGBA(14,63,115,1),RGBA(176, 176, 176, 1))
                        BorderThickness: =If(marginPolicyType = 2, 2, 0)
                        Fill: =RGBA(246, 246, 246, 1)
                        Height: =If(marginPolicyType = 2, 2, 0)
                        Width: =Parent.Width
                        Y: =38
                        ZIndex: =2

            btnRefresh_mr_tab_3 As button:
                BorderThickness: =0
                DisabledColor: =Self.Color
                DisabledFill: =Self.Fill
                Fill: =RGBA(17, 79, 144, 1)
                FocusedBorderThickness: =0
                Font: =Font.Arial
                FontWeight: =FontWeight.Normal
                Height: =44
                OnSelect: |-
                    =Clear(listNotAllowInputStock);
                    Clear(mlInvalidRows);
                    Set(isLoading, true);
                    Set(inputChanged2, false);
                    ClearCollect(unTradingList,'TVS->GetCurrentUnTradingList'.Run(resKeyOpenAll.open, resKeyOpenAll.close,envDEV,envTEST,envUAT1,envUAT2).listUnTrading);
                    ClearCollect(listNotAllowInputApiStock,unTradingList);
                    Set(isLoading, false);
                PaddingBottom: =10
                PaddingLeft: =30
                PaddingRight: =10
                PaddingTop: =10
                PressedColor: =Self.Color 
                PressedFill: =Self.Fill
                Size: =10.5
                Text: =""
                Tooltip: ="Click here to clear data"
                Visible: =DealDetailTab = 2 && marginPolicyType = 1
                Width: =44
                X: =TextInput2_7.X + TextInput2_7.Width + 10
                Y: =TextInput2_7.Y
                ZIndex: =77

            RefreshListIcon_mr_tab_3 As icon.Reload:
                Color: =RGBA(255, 255, 255, 1)
                Height: =20
                Icon: =Icon.Reload
                OnSelect: =Select(btnRefresh_mr_tab_3);
                Tooltip: ="Click here to clear data"
                Visible: =DealDetailTab = 2 && marginPolicyType = 1
                Width: =20
                X: =btnRefresh_mr_tab_3.X + 12
                Y: =btnRefresh_mr_tab_3.Y + btnRefresh_mr_tab_3.Height * 0.5 - Self.Height*0.5
                ZIndex: =78

            InvalidData_Label As label:
                Color: =RGBA(255, 0, 0, 1)
                Font: =Font.Arial
                Height: =If(Self.Visible, 42, 0)
                Size: =10.5
                Text: ="Invalid data, please check the data again."
                Visible: =!IsEmpty(mlInvalidRows) && (DealDetailTab = 1 && marginPolicyType = 1 || DealDetailTab = 2 && marginPolicyType = 1)
                Width: =300
                X: =QT_Action_list_stock.X
                Y: =Label_click_out_side_mr.Y + Label_click_out_side_mr.Height
                ZIndex: =79

            NotAllow_HistoryGroup As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =79

                ClearFormDateQT2_8 As icon.Cancel:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.Cancel
                    OnSelect: =Reset(DateFrom_Datepicker_9);
                    Visible: =!IsBlank(DateFrom_Datepicker_9.SelectedDate) && DealDetailTab = 2 && marginPolicyType = 2
                    Width: =15
                    X: =DateFrom_Datepicker_9.X + DateFrom_Datepicker_9.Width - 50
                    Y: =DateFrom_Datepicker_9.Y + 10
                    ZIndex: =28

                ClearFormDateQT2_10 As icon.Cancel:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.Cancel
                    OnSelect: =Reset(DateTo_DatePicker_9);
                    Visible: =!IsBlank(DateTo_DatePicker_9.SelectedDate) && DealDetailTab = 2 && marginPolicyType = 2
                    Width: =15
                    X: =DateTo_DatePicker_9.X + DateTo_DatePicker_9.Width - 50
                    Y: =DateTo_DatePicker_9.Y + 10
                    ZIndex: =29

                EmptyData_Label_2 As label:
                    Align: =Align.Center
                    Font: =Font.Arial
                    Size: =10.5
                    Text: ="Empty data."
                    Visible: |-
                        =// IsEmpty(First(listRes).listItem) && DealDetailTab = 2 && marginPolicyType = 2
                        false
                    Width: =HrQT2_Table_2.Width
                    X: =HrQT2_Table_2.X
                    Y: =HrQT2_Table_2.Y + 5
                    ZIndex: =30

                DateFrom_InputBack_9 As text:
                    BorderColor: =RGBA(191, 191, 192, 1)
                    BorderThickness: =1
                    Default: ="Đầu vào văn bản"
                    FocusedBorderThickness: =2
                    Font: =Font.Arial
                    Height: =44
                    HoverBorderColor: =RGBA(191, 191, 192, 1)
                    HoverFill: =RGBA(186, 202, 226, 0)
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    RadiusBottomLeft: =8
                    RadiusBottomRight: =8
                    RadiusTopLeft: =8
                    RadiusTopRight: =8
                    Size: =13.00
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2
                    Width: =If(Parent.Width > 900, 216.00,  Parent.Width > 800, 150, (App.Width - 40) / 2 - 5)
                    X: =CreateDate_IssuerList_Label_2.X
                    Y: =CreateDate_IssuerList_Label_2.Y + CreateDate_IssuerList_Label_2.Height
                    ZIndex: =31

                DateFrom_Datepicker_9 As datepicker:
                    BorderThickness: =0
                    DefaultDate: =
                    FocusedBorderThickness: =0
                    Font: =Font.Arial
                    Format: ="dd/mm/yyyy"
                    Height: =DateFrom_InputBack_9.Height - 6
                    IconBackground: =RGBA(255, 255, 255, 1)
                    IconFill: =RGBA(0, 0, 0, 1)
                    InputTextPlaceholder: =If(IsBlank(Self.SelectedDate), Text("From", Self.Format, Self.Language))
                    PaddingBottom: =10
                    PaddingLeft: =10
                    PaddingRight: =10
                    PaddingTop: =10
                    Size: =10.5
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2
                    Width: =DateFrom_InputBack_9.Width - 6
                    X: =DateFrom_InputBack_9.X + 3
                    Y: =DateFrom_InputBack_9.Y + 3
                    ZIndex: =32

                DateTo_InputBack_8 As text:
                    BorderColor: =RGBA(191, 191, 192, 1)
                    BorderThickness: =1
                    Default: ="Đầu vào văn bản"
                    FocusedBorderThickness: =2
                    Font: =Font.Arial
                    Height: =44
                    HoverBorderColor: =RGBA(191, 191, 192, 1)
                    HoverFill: =RGBA(186, 202, 226, 0)
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    RadiusBottomLeft: =8
                    RadiusBottomRight: =8
                    RadiusTopLeft: =8
                    RadiusTopRight: =8
                    Size: =13.00
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2
                    Width: =If(Parent.Width > 900, 216.00,  Parent.Width > 800, 150, (App.Width - 40) / 2 - 5)
                    X: =DateFrom_InputBack_9.X + DateFrom_InputBack_9.Width + 10
                    Y: =DateFrom_InputBack_9.Y
                    ZIndex: =33

                DateTo_DatePicker_9 As datepicker:
                    BorderThickness: =0
                    DefaultDate: =
                    FocusedBorderThickness: =0
                    Font: =Font.Arial
                    Format: ="dd/mm/yyyy"
                    Height: =DateTo_InputBack_8.Height - 6
                    IconBackground: =RGBA(255, 255, 255, 1)
                    IconFill: =RGBA(0, 0, 0, 1)
                    InputTextPlaceholder: =If(IsBlank(Self.SelectedDate), Text("To", Self.Format, Self.Language))
                    PaddingBottom: =10
                    PaddingLeft: =10
                    PaddingRight: =10
                    PaddingTop: =10
                    Size: =10.5
                    StartYear: =If(IsBlank(DateFrom_Datepicker_9.SelectedDate), 1970, Year(DateFrom_Datepicker_9.SelectedDate))
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2
                    Width: =DateTo_InputBack_8.Width - 6
                    X: =DateTo_InputBack_8.X + 3
                    Y: =DateTo_InputBack_8.Y + 3
                    ZIndex: =34

                FromListEncryption_4 As gallery.galleryVertical:
                    '#CopilotOverlayLabel': ="Filtered"
                    BorderColor: =RGBA(255, 255, 255, 1)
                    Fill: =RGBA(0,0,0,0)
                    Height: =Min(Max(FromListEncryption_4.AllItemsCount, 1) * Self.TemplateHeight, 10 * Self.TemplateHeight)
                    Items: =First(listItemUnTrading).listItem
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    OnSelect: =true
                    TemplateFill: =//If(Mod(Value(ThisItem.id), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                    TemplatePadding: =0
                    TemplateSize: =40
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2 && !IsEmpty(First(listRes).listItem)
                    Width: =If(App.Width > 800, SearchAUMButton_16.X + SearchAUMButton_16.Width, DateTo_InputBack_8.X + DateTo_InputBack_8.Width - 15) - Self.X
                    X: =Header_No_3.X
                    Y: =Header_No_3.Y + Header_No_3.Height + 5
                    ZIndex: =36

                    Button_OverLay_8 As button:
                        Fill: =RGBA(0, 0, 0, 0)
                        Font: =Font.Arial
                        HoverFill: =Self.Fill
                        OnSelect: |-
                            =Set(colEncryption1, ThisItem);
                            Set(isEditShowPopup, true)
                        PressedFill: =
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Text: =""
                        Width: =Parent.Width
                        ZIndex: =1

                    Label_No_4 As label:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =If(!IsBlank(HistorySelectedItemSTT) && ThisItem.stt = HistorySelectedItemSTT, RGBA(209, 221, 255, 0.5), Mod(Value(ThisItem.stt), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                        Font: =Font.Arial
                        OnSelect: =Select(Parent)
                        PaddingRight: =5.00
                        PaddingTop: =5.00
                        Size: =10.5
                        Text: =ThisItem.stt
                        Width: =Header_No_3.Width
                        X: =0 - If(App.Width > 600, 0, 0)
                        ZIndex: =2

                    Label_Name_4 As label:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =If(!IsBlank(HistorySelectedItemSTT) && ThisItem.stt = HistorySelectedItemSTT, RGBA(209, 221, 255, 0.5), Mod(Value(ThisItem.stt), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                        Font: =Font.Arial
                        OnSelect: =Select(Parent)
                        PaddingRight: =5.00
                        PaddingTop: =10
                        Size: =10.5
                        Text: |-
                            =Text(DateTimeValue(ThisItem.created_date), "dd/mm/yyyy hh:mm:ss")
                        Width: =Header_CreatedDate_2.Width
                        X: =Label_No_4.X + Label_No_4.Width
                        ZIndex: =3

                    Label_createdBy_2 As label:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =If(!IsBlank(HistorySelectedItemSTT) && ThisItem.stt = HistorySelectedItemSTT, RGBA(209, 221, 255, 0.5), Mod(Value(ThisItem.stt), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                        Font: =Font.Arial
                        OnSelect: =Select(Parent)
                        PaddingRight: =SeeIcon_2.Width
                        PaddingTop: =5.00
                        Size: =10.5
                        Text: =ThisItem.created_by
                        Width: =Header_CreatedBy_2.Width
                        X: =Label_Name_4.X + Label_Name_4.Width
                        ZIndex: =4

                    SeeIcon_2 As htmlViewer:
                        Fill: =RGBA(0,0,0,0)
                        Font: =Font.Arial
                        HtmlText: |-
                            ="<div style=""width:40px; height:38px; display:flex; justify-content:center; align-items:center; cursor:pointer""><svg xmlns=""http://www.w3.org/2000/svg"" width=""22"" height=""16"" viewBox=""0 0 22 16"" fill=""none"">
                              <path d=""M11 5C10.2044 5 9.44129 5.31607 8.87868 5.87868C8.31607 6.44129 8 7.20435 8 8C8 8.79565 8.31607 9.55871 8.87868 10.1213C9.44129 10.6839 10.2044 11 11 11C11.7956 11 12.5587 10.6839 13.1213 10.1213C13.6839 9.55871 14 8.79565 14 8C14 7.20435 13.6839 6.44129 13.1213 5.87868C12.5587 5.31607 11.7956 5 11 5ZM11 13C9.67392 13 8.40215 12.4732 7.46447 11.5355C6.52678 10.5979 6 9.32608 6 8C6 6.67392 6.52678 5.40215 7.46447 4.46447C8.40215 3.52678 9.67392 3 11 3C12.3261 3 13.5979 3.52678 14.5355 4.46447C15.4732 5.40215 16 6.67392 16 8C16 9.32608 15.4732 10.5979 14.5355 11.5355C13.5979 12.4732 12.3261 13 11 13ZM11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5Z"" fill=""black""/>
                            </svg></div>"
                        OnSelect: |-
                            =If(marginPolicyType=1,
                                Set(isLoading, true);
                                Set(HistorySelectedItemSTT, ThisItem.stt);
                                Set(DetailIssuerInMRHistory,'TVS->DetailListPolicy'.Run(resKeyOpenAll.open,resKeyOpenAll.close, ThisItem.group_id,envDEV,envTEST,envUAT1,envUAT2).listCurrentPolicy);
                                Set(isLoading, false),
                            marginPolicyType=2,
                                Set(isLoading, true);
                                Set(HistorySelectedItemSTT, ThisItem.stt);
                                Set(DetailTradingInHistory,'TVS->DetailListUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close, ThisItem.group_id,envDEV,envTEST,envUAT1,envUAT2).listUntrading);
                                Set(isLoading, false);
                            )
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Width: =40
                        X: =Label_createdBy_2.X + Label_createdBy_2.Width - Self.Width
                        ZIndex: =5

                Header_CreatedDate_2 As label:
                    BorderColor: =RGBA(89, 0, 0, 1)
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Bold
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    Size: =10.5
                    Text: ="Modify date"
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2
                    Width: =HrQT2_Table_2.Width * If(App.Width > 600, 0.5, 0.4)
                    X: =Header_No_3.X + Header_No_3.Width
                    Y: =Header_No_3.Y
                    ZIndex: =37

                Header_No_3 As label:
                    BorderColor: =RGBA(89, 0, 0, 1)
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Semibold
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    Size: =10.5
                    Text: ="No"
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2
                    Width: =HrQT2_Table_2.Width * 0.1
                    X: =CreateDate_IssuerList_Label_2.X
                    Y: =SearchAUMButton_16.Y + SearchAUMButton_16.Height + 10
                    ZIndex: =38

                Header_CreatedBy_2 As label:
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Bold
                    Size: =10.5
                    Text: ="Modify by"
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2
                    Width: =HrQT2_Table_2.Width * If(App.Width > 600, 0.45, 0.55) - If(App.Width > 600, 30, 25)
                    X: =Header_CreatedDate_2.X + Header_CreatedDate_2.Width
                    Y: =Header_No_3.Y
                    ZIndex: =39

                PreviousIcon_12 As icon.ChevronLeft:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.ChevronLeft
                    OnSelect: |-
                        =Set(currentPageIndex,currentPageIndex-1);
                        ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                        ClearCollect(listItemUnTradingHistory,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                        Set(pageCount,First(listItemUnTradingHistory).pageCount);
                        ClearCollect(listRes1Client,listItemUnTrading);
                    Tooltip: ="Previous page"
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2 && currentPageIndex <> 0 && FromListEncryption_4.AllItemsCount <> 0
                    Width: =15
                    X: =White_Background_History_1.X
                    Y: =White_Background_History_1.Y + White_Background_History_1.Height + 5
                    ZIndex: =40

                NextIcon_12 As icon.ChevronRight:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.ChevronRight
                    OnSelect: |-
                        =Set(currentPageIndex,currentPageIndex+1);
                        ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                        ClearCollect(listItemUnTradingHistory,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                        Set(pageCount,First(listItemUnTradingHistory).pageCount);
                        ClearCollect(listRes1Client,listItemUnTrading);
                    Tooltip: ="Next page"
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2 && currentPageIndex < pageCount - 1 && FromListEncryption_4.AllItemsCount <> 0
                    Width: =15
                    X: =PageNumbers_12.X + PageNumbers_12.Width
                    Y: =PreviousIcon_12.Y
                    ZIndex: =41

                "PageNumbers_12 As gallery.'BrowseLayout_Horizontal_TwoTextOneImageVariant_ver5.0'":
                    '#CopilotOverlayLabel': ="Filtered"
                    Height: =44
                    Items: =listPageIndex
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =40
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2 && FromListEncryption_4.AllItemsCount <> 0
                    Width: =Self.AllItemsCount * Self.TemplateWidth
                    X: =PreviousIcon_12.X + PreviousIcon_12.Width
                    Y: =PreviousIcon_12.Y - 10
                    ZIndex: =42

                    pageIndex_12 As htmlViewer:
                        DisplayMode: |
                            =DisplayMode.Edit
                        Font: =Font.Arial
                        HtmlText: |-
                            ="<div style='width: 15px; display: flex; justify-content: center; align-items: center; cursor: pointer; padding: 3px; background-color: transparent; border-radius: 5px; border: " & If(currentPageIndex = ThisItem.Value, "1px solid #1890FF", "none")&";'><font color=" & If(currentPageIndex = ThisItem.Value, "#1890FF", "black")&">" & (ThisItem.Value + 1) & "</font></div>"
                        OnSelect: |-
                            =Set(isLoading, true);
                            Set(currentPageIndex,ThisItem.Value);
                            ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                            ClearCollect(listItemUnTradingHistory,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,"","",PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                            ClearCollect(listItemUnTrading, listItemUnTradingHistory);
                            Set(pageCount,First(listItemUnTradingHistory).pageCount);
                            ClearCollect(listRes1Client,listItemUnTrading);
                            Set(isLoading, false);
                        PaddingRight: =0
                        Width: =40
                        ZIndex: =2

                CreateDate_IssuerList_Label_2 As label:
                    BorderColor: =RGBA(89, 0, 0, 1)
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    Size: =10.5
                    Text: ="Created date"
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2
                    Width: =100
                    X: =QT_Action_list_stock.X
                    Y: =QT_Action_list_stock.Y + QT_Action_list_stock.Height
                    ZIndex: =43

                HrQT2_Table_2 As rectangle:
                    BorderColor: =RGBA(176, 176, 176, 1)
                    BorderThickness: =1
                    Fill: =RGBA(246, 246, 246, 1)
                    Height: =0.5
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2
                    Width: =FromListEncryption_4.Width
                    X: =FromListEncryption_4.X
                    Y: =FromListEncryption_4.Y - 7
                    ZIndex: =44

                Container5_4 As groupContainer.verticalAutoLayoutContainer:
                    DropShadow: =DropShadow.None
                    Height: =Container6_7.Height + 15
                    LayoutDirection: =LayoutDirection.Vertical
                    LayoutMode: =LayoutMode.Auto
                    LayoutOverflowX: =LayoutOverflow.Scroll
                    LayoutOverflowY: =LayoutOverflow.Scroll
                    Visible: =DealDetailTab = 2 && marginPolicyType = 2 && !IsBlank(DetailTradingInHistory)
                    Width: =White_Background_9.Width - 50
                    X: =FromListEncryption_4.X
                    Y: =White_Background_History_1.Y + White_Background_History_1.Height + 40
                    ZIndex: =45

                    Container6_7 As groupContainer.manualLayoutContainer:
                        DropShadow: =DropShadow.None
                        FillPortions: =0
                        Height: =Gallery8_6.Height + 60
                        LayoutMinHeight: =Gallery8_6.Height + 60
                        LayoutMinWidth: =layout_maxQtyPer_4.X + layout_maxQtyPer_4.Width + 20
                        ZIndex: =2

                        layout_ticker_4 As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =100
                            X: =layout_no_list_his.X + layout_no_list_his.Width
                            ZIndex: =3

                        layout_market_3 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =120
                            X: =layout_ticker_4.X + layout_ticker_4.Width
                            Y: =layout_ticker_4.Y
                            ZIndex: =4

                        layout_marginRatio_3 As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =180
                            X: =layout_market_3.X + layout_market_3.Width
                            Y: =layout_market_3.Y
                            ZIndex: =5

                        layout_maxQtyAll_3 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =250
                            X: =layout_marginRatio_3.X + layout_marginRatio_3.Width
                            Y: =layout_marginRatio_3.Y
                            ZIndex: =6

                        layout_maxQtyPer_4 As rectangle:
                            BorderColor: =RGBA(191, 191, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Width: =250
                            X: =layout_maxQtyAll_3.X + layout_maxQtyAll_3.Width
                            Y: =layout_marginRatio_3.Y
                            ZIndex: =7

                        label_ticker_4 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Market"
                            Width: =layout_ticker_4.Width
                            X: =layout_ticker_4.X
                            Y: =layout_ticker_4.Y
                            ZIndex: =8

                        label_market_3 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Ticker"
                            Width: =layout_market_3.Width
                            X: =layout_market_3.X
                            Y: =layout_market_3.Y
                            ZIndex: =9

                        label_marginRatio_3 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Company name"
                            Width: =layout_marginRatio_3.Width
                            X: =layout_marginRatio_3.X
                            Y: =layout_market_3.Y
                            ZIndex: =10

                        label_maxQtyAll_3 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Effective date"
                            Width: =layout_maxQtyAll_3.Width
                            X: =layout_maxQtyAll_3.X
                            Y: =layout_maxQtyAll_3.Y
                            ZIndex: =11

                        label_maxQtyPer_4 As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="Reason"
                            Width: =layout_maxQtyPer_4.Width
                            X: =layout_maxQtyPer_4.X
                            Y: =layout_maxQtyPer_4.Y
                            ZIndex: =12

                        "Gallery8_6 As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver5.0'":
                            '#CopilotOverlayLabel': ="Filtered"
                            Height: =If(Self.AllItemsCount * Self.TemplateHeight > (Self.TemplateHeight * If(App.Width > 600, 8, 6)), (Self.TemplateHeight * If(App.Width > 600, 8, 6)), Self.AllItemsCount * Self.TemplateHeight)
                            Items: =DetailTradingInHistory
                            Layout: =Layout.Vertical
                            TemplatePadding: =0
                            TemplateSize: =If(App.Width > 600, 50, 70)
                            Width: =layout_maxQtyPer_4.X + layout_maxQtyPer_4.Width + 20
                            Y: =layout_ticker_4.Y + layout_ticker_4.Height
                            ZIndex: =13

                            layout_No_list_1 As rectangle:
                                BorderColor: =RGBA(192, 192, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_8.TemplateHeight
                                Visible: =Parent.Visible
                                Width: =layout_no_list.Width
                                ZIndex: =1

                            layout_tickerFor_4 As rectangle:
                                BorderColor: =RGBA(192, 192, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_6.TemplateHeight
                                Width: =layout_ticker_4.Width
                                X: =layout_No_list_1.X + layout_No_list_1.Width
                                ZIndex: =2

                            layout_marketFor_3 As rectangle:
                                BorderColor: =RGBA(191, 191, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_6.TemplateHeight
                                Width: =layout_market_3.Width
                                X: =layout_tickerFor_4.X + layout_tickerFor_4.Width
                                Y: =layout_tickerFor_4.Y
                                ZIndex: =3

                            layout_marginRatioFor_3 As rectangle:
                                BorderColor: =RGBA(192, 192, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_6.TemplateHeight
                                Width: =label_marginRatio_3.Width
                                X: =layout_marketFor_3.X + layout_marketFor_3.Width
                                Y: =layout_marketFor_3.Y
                                ZIndex: =4

                            layout_maxQtyAllFor_3 As rectangle:
                                BorderColor: =RGBA(191, 191, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_6.TemplateHeight
                                Width: =layout_maxQtyAll_3.Width 
                                X: =layout_marginRatioFor_3.X + layout_marginRatioFor_3.Width
                                Y: =layout_marginRatioFor_3.Y
                                ZIndex: =5

                            layout_maxQtyPerFor_4 As rectangle:
                                BorderColor: =RGBA(191, 191, 192, 1)
                                BorderThickness: =0.5
                                Fill: =RGBA(0, 0, 0, 0)
                                Height: =Gallery8_6.TemplateHeight
                                Width: =layout_maxQtyAll_3.Width 
                                X: =layout_maxQtyAllFor_3.X + layout_maxQtyAllFor_3.Width
                                Y: =layout_marginRatioFor_3.Y
                                ZIndex: =6

                            label_NoFor_7 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_8.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.stt
                                Visible: =Parent.Visible
                                Width: =layout_No_list_1.Width
                                X: =layout_No_list_1.X
                                Y: =layout_No_list_1.Y
                                ZIndex: =7

                            label_tickerFor_4 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_6.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.market
                                Width: =layout_tickerFor_4.Width
                                X: =layout_tickerFor_4.X
                                Y: =layout_tickerFor_4.Y
                                ZIndex: =8

                            label_marketFor_3 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_6.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.ticker
                                Width: =layout_marketFor_3.Width
                                X: =layout_marketFor_3.X
                                Y: =layout_marketFor_3.Y
                                ZIndex: =9

                            label_marginRatioFor_3 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_6.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.company_name
                                Width: =layout_marginRatioFor_3.Width
                                X: =layout_marginRatioFor_3.X
                                Y: =layout_marginRatioFor_3.Y
                                ZIndex: =10

                            label_maxQtyAllFor_3 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_6.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.effective_date
                                Width: =layout_maxQtyAllFor_3.Width
                                X: =layout_maxQtyAllFor_3.X
                                Y: =layout_maxQtyAllFor_3.Y
                                ZIndex: =11

                            label_maxQtyPerFor_4 As label:
                                Font: =Font.Arial
                                Height: =Gallery8_6.TemplateHeight
                                PaddingBottom: =10
                                PaddingLeft: =10
                                PaddingRight: =10
                                PaddingTop: =10
                                Size: =If(Parent.Width > 600, 10.5, 9)
                                Text: =ThisItem.reason
                                Width: =layout_maxQtyPerFor_4.Width
                                X: =layout_maxQtyPerFor_4.X
                                Y: =layout_maxQtyPerFor_4.Y
                                ZIndex: =12

                        layout_no_list_his As rectangle:
                            BorderColor: =RGBA(192, 192, 192, 1)
                            BorderThickness: =0.5
                            Fill: =RGBA(237, 237, 237, 1)
                            Height: =42
                            Visible: =Parent.Visible
                            Width: =100
                            ZIndex: =14

                        label_no_list_his As label:
                            Font: =Font.Arial
                            FontWeight: =FontWeight.Bold
                            Height: =42
                            PaddingBottom: =10
                            PaddingLeft: =10
                            PaddingRight: =10
                            PaddingTop: =10
                            Size: =If(Parent.Width > 600, 10.5, 9)
                            Text: ="No"
                            Visible: =Parent.Visible
                            Width: =layout_no_list_his.Width
                            X: =layout_no_list_his.X
                            Y: =layout_no_list_his.Y
                            ZIndex: =15

            SearchAUMButton_18 As button:
                BorderThickness: =0
                DisabledColor: =Self.Color
                DisabledFill: =Self.Fill
                Fill: =RGBA(17, 79, 144, 1)
                FocusedBorderThickness: =0
                Font: =Font.Arial
                FontWeight: =FontWeight.Normal
                Height: =45
                OnSelect: |-
                    =UpdateContext({ShowNotification: false});
                    If(DateDiff(DateFrom_Datepicker_10.SelectedDate, DateTo_DatePicker_10.SelectedDate) < 0,
                    Set(NoticationText, "The from date cannot be greater than the to date!"); Set(IsError, true); UpdateContext({ShowNotification: true}),
                    ClearCollect(listEquityHistory,'TVS->FindAllEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,Text(DateFrom_Datepicker_10.SelectedDate, "yyyy-mm-dd"),Text(DateTo_DatePicker_10.SelectedDate, "yyyy-mm-dd"),PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                    Set(pageCount,First(listEquityHistory).pageCount);
                    ClearCollect(listItemEquity, First(listEquityHistory).listItem);
                    
                    Set(pageIndexFirst, 5*RoundDown(currentPageIndex/5, 0));
                    Clear(listPageIndex);
                    ClearCollect(listPageIndex, pageIndexFirst);
                    Set(pageIndexFirst, 5*RoundDown(currentPageIndex/5, 0));
                    
                    ForAll(
                        maxList,
                        If(Last(listPageIndex).Value + 1 < pageCount,
                            Collect(listPageIndex,Last(listPageIndex).Value + 1);
                        );
                    ))
                PaddingBottom: =10
                PaddingLeft: =30
                PaddingRight: =10
                PaddingTop: =10
                PressedColor: =Self.Color 
                PressedFill: =Self.Fill
                Size: =10.5
                Text: =""
                Visible: =DealDetailTab = 3 && marginPolicyType = 2
                Width: =44
                X: =If(Parent.Width > 800, DateTo_InputBack_9.X + DateTo_InputBack_9.Width + 10, DateTo_InputBack_9.X + DateTo_InputBack_9.Width - Self.Width - 53)
                Y: =If(Parent.Width > 800, DateTo_InputBack_9.Y, DateFrom_InputBack_10.Y + DateFrom_InputBack_10.Height + 10)
                ZIndex: =80

            SearchAUMIcon_mr_tab_3 As htmlViewer:
                Font: =Font.Arial
                Height: =35
                HtmlText: |-
                    ="<div style=""display:flex;align-items:center; justify-content: center;; cursor: pointer; width: 30px; height: "&Self.Height - 2&"px""; padding: 5px""><svg xmlns=""http://www.w3.org/2000/svg"" width=""21"" height=""20"" viewBox=""0 0 21 20"" fill=""none"">
                      <path d=""M19.5002 19.0002L15.1572 14.6572M15.1572 14.6572C15.9001 13.9143 16.4894 13.0324 16.8914 12.0618C17.2935 11.0911 17.5004 10.0508 17.5004 9.00021C17.5004 7.9496 17.2935 6.90929 16.8914 5.93866C16.4894 4.96803 15.9001 4.08609 15.1572 3.34321C14.4143 2.60032 13.5324 2.01103 12.5618 1.60898C11.5911 1.20693 10.5508 1 9.50021 1C8.4496 1 7.40929 1.20693 6.43866 1.60898C5.46803 2.01103 4.58609 2.60032 3.84321 3.34321C2.34288 4.84354 1.5 6.87842 1.5 9.00021C1.5 11.122 2.34288 13.1569 3.84321 14.6572C5.34354 16.1575 7.37842 17.0004 9.50021 17.0004C11.622 17.0004 13.6569 16.1575 15.1572 14.6572Z"" stroke=""white"" stroke-width=""2"" stroke-linecap=""round"" stroke-linejoin=""round""/>
                    </svg><div>"
                OnSelect: =Select(SearchAUMButton_18);
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Visible: =DealDetailTab = 3 && marginPolicyType = 2
                Width: =30
                X: =SearchAUMButton_18.X + 6
                Y: =SearchAUMButton_18.Y + 4
                ZIndex: =81

            Label_click_out_side_mr As label:
                Font: =Font.Arial
                Height: =50
                Italic: =true
                LineHeight: =2
                Size: =10.5
                Text: |-
                    ="Please click outside the screen after pasting the data.
                    Currency: billion VND"
                Visible: =DealDetailTab = 1 && marginPolicyType = 1
                Width: =350
                X: =InputDateHere_Label_7.X
                Y: =InputDateHere_Label_7.Y + InputDateHere_Label_7.Height + 10
                ZIndex: =82

            Label_click_out_side_list As label:
                Font: =Font.Arial
                Height: =30
                Italic: =true
                Size: =10.5
                Text: ="Please click outside the screen after pasting the data."
                Visible: =DealDetailTab = 2 && marginPolicyType = 1
                Width: =350
                X: =InputDateHere_Label_8.X
                Y: =TextInput2_7.Y + TextInput2_7.Height + 10
                ZIndex: =83

            Equity_HistoryGroup As group:
                Height: =5
                Width: =5
                X: =40
                Y: =40
                ZIndex: =83

                ClearFormDateQT2_9 As icon.Cancel:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.Cancel
                    OnSelect: |
                        =Reset(DateFrom_Datepicker_10);
                    Visible: =!IsBlank(DateFrom_Datepicker_10.SelectedDate) && DealDetailTab = 3 && marginPolicyType = 2
                    Width: =15
                    X: =DateFrom_Datepicker_10.X + DateFrom_Datepicker_10.Width - 50
                    Y: =DateFrom_Datepicker_10.Y + 10
                    ZIndex: =51

                ClearFormDateQT2_11 As icon.Cancel:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.Cancel
                    OnSelect: =Reset(DateTo_DatePicker_10);
                    Visible: =!IsBlank(DateTo_DatePicker_10.SelectedDate) && DealDetailTab = 3 && marginPolicyType = 2
                    Width: =15
                    X: =DateTo_DatePicker_10.X + DateTo_DatePicker_10.Width - 50
                    Y: =DateTo_DatePicker_10.Y + 10
                    ZIndex: =52

                EmptyData_Label_3 As label:
                    Align: =Align.Center
                    Font: =Font.Arial
                    Size: =10.5
                    Text: ="Empty data."
                    Visible: =IsEmpty(First(listRes).listItem) && DealDetailTab = 3 && marginPolicyType = 2
                    Width: =HrQT2_Table_3.Width
                    X: =HrQT2_Table_3.X
                    Y: =HrQT2_Table_3.Y + 5
                    ZIndex: =53

                DateFrom_InputBack_10 As text:
                    BorderColor: =RGBA(191, 191, 192, 1)
                    BorderThickness: =1
                    Default: ="Đầu vào văn bản"
                    FocusedBorderThickness: =2
                    Font: =Font.Arial
                    Height: =44
                    HoverBorderColor: =RGBA(191, 191, 192, 1)
                    HoverFill: =RGBA(186, 202, 226, 0)
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    RadiusBottomLeft: =8
                    RadiusBottomRight: =8
                    RadiusTopLeft: =8
                    RadiusTopRight: =8
                    Size: =13.00
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2
                    Width: =If(Parent.Width > 900, 216.00,  Parent.Width > 800, 150, (App.Width - 40) / 2 - 5)
                    X: =CreateDate_IssuerList_Label_3.X
                    Y: =CreateDate_IssuerList_Label_3.Y + CreateDate_IssuerList_Label_3.Height
                    ZIndex: =54

                DateFrom_Datepicker_10 As datepicker:
                    BorderThickness: =0
                    DefaultDate: =
                    FocusedBorderThickness: =0
                    Font: =Font.Arial
                    Format: ="dd/mm/yyyy"
                    Height: =DateFrom_InputBack_10.Height - 6
                    IconBackground: =RGBA(255, 255, 255, 1)
                    IconFill: =RGBA(0, 0, 0, 1)
                    InputTextPlaceholder: =If(IsBlank(Self.SelectedDate), Text("From", Self.Format, Self.Language))
                    PaddingBottom: =10
                    PaddingLeft: =10
                    PaddingRight: =10
                    PaddingTop: =10
                    Size: =10.5
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2
                    Width: =DateFrom_InputBack_10.Width - 6
                    X: =DateFrom_InputBack_10.X + 3
                    Y: =DateFrom_InputBack_10.Y + 3
                    ZIndex: =55

                DateTo_InputBack_9 As text:
                    BorderColor: =RGBA(191, 191, 192, 1)
                    BorderThickness: =1
                    Default: ="Đầu vào văn bản"
                    FocusedBorderThickness: =2
                    Font: =Font.Arial
                    Height: =44
                    HoverBorderColor: =RGBA(191, 191, 192, 1)
                    HoverFill: =RGBA(186, 202, 226, 0)
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    RadiusBottomLeft: =8
                    RadiusBottomRight: =8
                    RadiusTopLeft: =8
                    RadiusTopRight: =8
                    Size: =13.00
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2
                    Width: =If(Parent.Width > 900, 216.00,  Parent.Width > 800, 150, (App.Width - 40) / 2 - 5)
                    X: =DateFrom_InputBack_10.X + DateFrom_InputBack_10.Width + 10
                    Y: =DateFrom_InputBack_10.Y
                    ZIndex: =56

                DateTo_DatePicker_10 As datepicker:
                    BorderThickness: =0
                    DefaultDate: =
                    FocusedBorderThickness: =0
                    Font: =Font.Arial
                    Format: ="dd/mm/yyyy"
                    Height: =DateTo_InputBack_9.Height - 6
                    IconBackground: =RGBA(255, 255, 255, 1)
                    IconFill: =RGBA(0, 0, 0, 1)
                    InputTextPlaceholder: =If(IsBlank(Self.SelectedDate), Text("To", Self.Format, Self.Language))
                    PaddingBottom: =10
                    PaddingLeft: =10
                    PaddingRight: =10
                    PaddingTop: =10
                    Size: =10.5
                    StartYear: =If(IsBlank(DateFrom_Datepicker_10.SelectedDate), 1970, Year(DateFrom_Datepicker_10.SelectedDate))
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2
                    Width: =DateTo_InputBack_9.Width - 6
                    X: =DateTo_InputBack_9.X + 3
                    Y: =DateTo_InputBack_9.Y + 3
                    ZIndex: =57

                FromListEncryption_5 As gallery.galleryVertical:
                    '#CopilotOverlayLabel': ="Filtered"
                    BorderColor: =RGBA(255, 255, 255, 1)
                    Fill: =RGBA(0,0,0,0)
                    Height: =Min(FromListEncryption_5.AllItemsCount * Self.TemplateHeight, 10 * Self.TemplateHeight)
                    Items: =listItemEquity
                    Layout: =Layout.Vertical
                    LoadingSpinner: =LoadingSpinner.Data
                    OnSelect: =true
                    TemplateFill: =//If(Mod(Value(ThisItem.id), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                    TemplatePadding: =0
                    TemplateSize: =40
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2 && !IsEmpty(First(listRes).listItem)
                    Width: =Header_CreatedBy_3.Width + Header_CreatedDate_3.Width + Header_Equity.Width + Header_No_4.Width
                    X: =Header_No_4.X
                    Y: =Header_No_4.Y + Header_No_4.Height + 2
                    ZIndex: =60

                    Button_OverLay_9 As button:
                        Fill: =RGBA(0, 0, 0, 0)
                        Font: =Font.Arial
                        HoverFill: =Self.Fill
                        OnSelect: |-
                            =Set(colEncryption1, ThisItem);
                            Set(isEditShowPopup, true)
                        PressedFill: =
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Text: =""
                        Visible: =DealDetailTab = 3
                        Width: =Parent.Width
                        ZIndex: =1

                    Label_No_5 As label:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =If(!IsBlank(HistorySelectedItemSTT1) && ThisItem.stt = HistorySelectedItemSTT1, RGBA(209, 221, 255, 0.5), Mod(Value(ThisItem.stt), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                        Font: =Font.Arial
                        OnSelect: =Select(Parent)
                        PaddingRight: =5.00
                        PaddingTop: =5.00
                        Size: =10.5
                        Text: =ThisItem.stt
                        Visible: =DealDetailTab = 3
                        Width: =Header_No_4.Width
                        X: =0 - If(App.Width > 600, 0, 0)
                        ZIndex: =2

                    Label_Name_5 As label:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =If(!IsBlank(HistorySelectedItemSTT1) && ThisItem.stt = HistorySelectedItemSTT1, RGBA(209, 221, 255, 0.5), Mod(Value(ThisItem.stt), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                        Font: =Font.Arial
                        OnSelect: =Select(Parent)
                        PaddingRight: =5.00
                        PaddingTop: =10
                        Size: =10.5
                        Text: |-
                            =Text(DateTimeValue(ThisItem.created_date), "dd/mm/yyyy hh:mm:ss")
                        Visible: =DealDetailTab = 3
                        Width: =Header_CreatedDate_3.Width
                        X: =Label_Equity.X + Label_Equity.Width
                        ZIndex: =3

                    Label_createdBy_3 As label:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =If(!IsBlank(HistorySelectedItemSTT1) && ThisItem.stt = HistorySelectedItemSTT1, RGBA(209, 221, 255, 0.5), Mod(Value(ThisItem.stt), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                        Font: =Font.Arial
                        OnSelect: =Select(Parent)
                        PaddingRight: =30
                        PaddingTop: =5.00
                        Size: =10.5
                        Text: =ThisItem.created_by
                        Visible: =DealDetailTab = 3
                        Width: =Header_CreatedBy_3.Width
                        X: =Label_Name_5.X + Label_Name_5.Width
                        ZIndex: =4

                    SeeIcon_3 As htmlViewer:
                        Fill: =RGBA(0,0,0,0)
                        Font: =Font.Arial
                        HtmlText: |-
                            ="<div style=""width:40px; height:38px; display:flex; justify-content:center; align-items:center; cursor:pointer""><svg xmlns=""http://www.w3.org/2000/svg"" width=""22"" height=""16"" viewBox=""0 0 22 16"" fill=""none"">
                              <path d=""M11 5C10.2044 5 9.44129 5.31607 8.87868 5.87868C8.31607 6.44129 8 7.20435 8 8C8 8.79565 8.31607 9.55871 8.87868 10.1213C9.44129 10.6839 10.2044 11 11 11C11.7956 11 12.5587 10.6839 13.1213 10.1213C13.6839 9.55871 14 8.79565 14 8C14 7.20435 13.6839 6.44129 13.1213 5.87868C12.5587 5.31607 11.7956 5 11 5ZM11 13C9.67392 13 8.40215 12.4732 7.46447 11.5355C6.52678 10.5979 6 9.32608 6 8C6 6.67392 6.52678 5.40215 7.46447 4.46447C8.40215 3.52678 9.67392 3 11 3C12.3261 3 13.5979 3.52678 14.5355 4.46447C15.4732 5.40215 16 6.67392 16 8C16 9.32608 15.4732 10.5979 14.5355 11.5355C13.5979 12.4732 12.3261 13 11 13ZM11 0.5C6 0.5 1.73 3.61 0 8C1.73 12.39 6 15.5 11 15.5C16 15.5 20.27 12.39 22 8C20.27 3.61 16 0.5 11 0.5Z"" fill=""black""/>
                            </svg></div>"
                        OnSelect: |-
                            =Set(isLoading, true);
                            Set(HistorySelectedItemSTT1, ThisItem.stt);
                            Set(DetailIssuerInHistory2,'TVS->FindByIdEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close, ThisItem.id,envDEV,envTEST,envUAT1,envUAT2).listEquity);
                            Set(isLoading, false);
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Visible: =false
                        Width: =40
                        X: =FromListEncryption_5.X + FromListEncryption_5.Width - Self.Width - FromListEncryption_5.X
                        ZIndex: =5

                    Label_Equity As label:
                        BorderColor: =RGBA(89, 0, 0, 1)
                        Fill: =If(!IsBlank(HistorySelectedItemSTT1) && ThisItem.stt = HistorySelectedItemSTT1, RGBA(209, 221, 255, 0.5), Mod(Value(ThisItem.stt), 2) = 0, RGBA(246,246,246,1), RGBA(0,0,0,0))
                        Font: =Font.Arial
                        OnSelect: =Select(Parent)
                        PaddingRight: =5.00
                        PaddingTop: =10
                        Size: =10.5
                        Text: =Text(Value(Substitute(ThisItem.equity, ",","")))
                        Visible: =DealDetailTab = 3
                        Width: =Header_Equity.Width
                        X: =Label_No_5.X + Label_No_5.Width
                        ZIndex: =6

                Header_CreatedDate_3 As label:
                    BorderColor: =RGBA(89, 0, 0, 1)
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Bold
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    Size: =10.5
                    Text: ="Modify date"
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2
                    Width: =If(App.Width > 800, 200, (White_Background_9.Width - 90) / 3 - 20)
                    X: =Header_Equity.X + Header_Equity.Width
                    Y: =Header_No_4.Y
                    ZIndex: =61

                Header_No_4 As label:
                    BorderColor: =RGBA(89, 0, 0, 1)
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Semibold
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    Size: =10.5
                    Text: ="No"
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2
                    Width: =If(App.Width > 800, 50, 40)
                    X: =CreateDate_IssuerList_Label_3.X
                    Y: =SearchAUMButton_18.Y + SearchAUMButton_18.Height + 10
                    ZIndex: =62

                Header_CreatedBy_3 As label:
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Bold
                    Size: =10.5
                    Text: ="Modify by"
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2
                    Width: =If(App.Width > 800, 200, (White_Background_9.Width - 90) / 3)
                    X: =Header_CreatedDate_3.X + Header_CreatedDate_3.Width
                    Y: =Header_No_4.Y
                    ZIndex: =63

                PreviousIcon_14 As icon.ChevronLeft:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.ChevronLeft
                    OnSelect: |-
                        =Set(currentPageIndex,currentPageIndex-1);
                        Select(SearchAUMIcon_mr_tab_3);
                    Tooltip: ="Previous page"
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2 && currentPageIndex <> 0 && CountRows(listItemEquity) <> 0
                    Width: =15
                    X: =FromListEncryption_5.X
                    Y: =FromListEncryption_5.Y + FromListEncryption_5.Height + 15
                    ZIndex: =64

                NextIcon_14 As icon.ChevronRight:
                    Color: =RGBA(0, 0, 0, 1)
                    Height: =15
                    Icon: =Icon.ChevronRight
                    OnSelect: |-
                        =Set(currentPageIndex,currentPageIndex+1);
                        Select(SearchAUMIcon_mr_tab_3);
                    Tooltip: ="Next page"
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2 && currentPageIndex < pageCount - 1 && CountRows(listItemEquity) <> 0
                    Width: =15
                    X: =PageNumbers_14.X + PageNumbers_14.Width
                    Y: =PreviousIcon_14.Y
                    ZIndex: =65

                "PageNumbers_14 As gallery.'BrowseLayout_Horizontal_TwoTextOneImageVariant_ver5.0'":
                    '#CopilotOverlayLabel': ="Filtered"
                    Height: =44
                    Items: =listPageIndex
                    LoadingSpinner: =LoadingSpinner.Data
                    TemplatePadding: =0
                    TemplateSize: =40
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2 && CountRows(listItemEquity) <> 0
                    Width: =Self.AllItemsCount * Self.TemplateWidth
                    X: =PreviousIcon_14.X + PreviousIcon_14.Width
                    Y: =PreviousIcon_14.Y - 10
                    ZIndex: =66

                    pageIndex_14 As htmlViewer:
                        DisplayMode: |
                            =DisplayMode.Edit
                        Font: =Font.Arial
                        HtmlText: |-
                            ="<div style='width: 15px; display: flex; justify-content: center; align-items: center; cursor: pointer; padding: 3px; background-color: transparent; border-radius: 5px; border: " & If(currentPageIndex = ThisItem.Value, "1px solid #1890FF", "none")&";'><font color=" & If(currentPageIndex = ThisItem.Value, "#1890FF", "black")&">" & (ThisItem.Value + 1) & "</font></div>"
                        OnSelect: |-
                            =Set(currentPageIndex,ThisItem.Value);
                            Select(SearchAUMIcon_mr_tab_3);
                        PaddingRight: =0
                        Width: =40
                        ZIndex: =2

                CreateDate_IssuerList_Label_3 As label:
                    BorderColor: =RGBA(89, 0, 0, 1)
                    Font: =Font.Arial
                    FontWeight: =FontWeight.Bold
                    Height: =30
                    PaddingRight: =5.00
                    PaddingTop: =5.00
                    Size: =10.5
                    Text: ="Created date"
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2
                    Width: =100
                    X: =QT_Action_list_stock.X
                    Y: =QT_Action_list_stock.Y + QT_Action_list_stock.Height
                    ZIndex: =67

                HrQT2_Table_3 As rectangle:
                    BorderColor: =RGBA(176, 176, 176, 1)
                    BorderThickness: =1
                    Fill: =RGBA(246, 246, 246, 1)
                    Height: =0.5
                    Visible: =DealDetailTab = 3 && marginPolicyType = 2
                    Width: =FromListEncryption_5.Width
                    X: =FromListEncryption_5.X
                    Y: =FromListEncryption_5.Y - 7
                    ZIndex: =68

            Header_Equity As label:
                BorderColor: =RGBA(89, 0, 0, 1)
                Font: =Font.Arial
                FontWeight: =FontWeight.Semibold
                PaddingRight: =5.00
                PaddingTop: =5.00
                Size: =10.5
                Text: ="Equity"
                Visible: =DealDetailTab = 3 && marginPolicyType = 2
                Width: =If(App.Width > 800, 200, (White_Background_9.Width - 90) / 3 + 30)
                X: =Header_No_4.X + Header_No_4.Width
                Y: =SearchAUMButton_18.Y + SearchAUMButton_18.Height + 10
                ZIndex: =84

            EmptyData_Label_4 As label:
                Align: =Align.Center
                Font: =Font.Arial
                Size: =10.5
                Text: ="Empty data."
                Visible: =CountRows(listItemEquity) = 0 && DealDetailTab = 3 && marginPolicyType = 2
                Width: =HrQT2_Table_3.Width
                X: =HrQT2_Table_3.X
                Y: =HrQT2_Table_3.Y + 5
                ZIndex: =85

            FromListEncryption_3_EmptyLabel As label:
                Align: =Align.Center
                Font: =Font.Arial
                Size: =10.5
                Text: ="Empty data."
                Visible: =FromListEncryption_3.Visible && FromListEncryption_3.AllItemsCount = 0 && !isLoading
                Width: =FromListEncryption_3.Width
                X: =FromListEncryption_3.X
                Y: =FromListEncryption_3.Y
                ZIndex: =86

            FromListEncryption_4_EmptyLabel As label:
                Align: =Align.Center
                Font: =Font.Arial
                Size: =10.5
                Text: ="Empty data."
                Visible: =FromListEncryption_4.Visible && FromListEncryption_4.AllItemsCount = 0 && !isLoading
                Width: =FromListEncryption_4.Width
                X: =FromListEncryption_4.X
                Y: =FromListEncryption_4.Y
                ZIndex: =87

            Refresh_TVSEquity_Button As button:
                BorderThickness: =0
                DisabledColor: =Self.Color
                DisabledFill: =Self.Fill
                Fill: =RGBA(17, 79, 144, 1)
                FocusedBorderThickness: =0
                Font: =Font.Arial
                FontWeight: =FontWeight.Normal
                Height: =45
                OnSelect: |-
                    =Reset(DateTo_DatePicker_10);
                    Reset(DateFrom_Datepicker_10);
                    Select(SearchAUMButton_18);
                PaddingBottom: =10
                PaddingLeft: =30
                PaddingRight: =10
                PaddingTop: =10
                PressedColor: =Self.Color 
                PressedFill: =Self.Fill
                Size: =10.5
                Text: =""
                Tooltip: ="Click here to clear filters"
                Visible: =DealDetailTab = 3 && marginPolicyType = 2
                Width: =44
                X: =SearchAUMButton_18.X + SearchAUMButton_18.Width + 10
                Y: =If(Parent.Width > 800, DateTo_InputBack_9.Y, DateFrom_InputBack_10.Y + DateFrom_InputBack_10.Height + 10)
                ZIndex: =88

            Refresh_TVSEquity_Icon As icon.Reload:
                Color: =RGBA(255, 255, 255, 1)
                Height: =20
                Icon: =Icon.Reload
                OnSelect: =Select(Refresh_TVSEquity_Button);
                Tooltip: ="Click here to clear filters"
                Visible: =Refresh_TVSEquity_Button.Visible
                Width: =20
                X: =Refresh_TVSEquity_Button.X + 12
                Y: =Refresh_TVSEquity_Button.Y + 12
                ZIndex: =89

            Labe_lbillion_VND As label:
                Font: =Font.Arial
                Italic: =true
                Size: =10.5
                Text: |-
                    ="Currency: billion VND"
                Visible: =Container5_1.Visible
                X: =FromListEncryption_3.X
                Y: =FromListEncryption_3.Y + FromListEncryption_3.Height + 70
                ZIndex: =90

    SubHeaderIssuers_1 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =5

        SubHeaderBg_7 As rectangle:
            BorderColor: =RGBA(255, 255, 255, 1)
            Fill: =RGBA(255, 255, 255, 1)
            Height: =60
            Width: =Parent.Width - If(Parent.Width > 800, If(MobileShowMenu, 240, 50), 0)
            X: =If(Parent.Width > 800, If(MobileShowMenu, MenuItemsSideBar_13.X + MenuItemsSideBar_13.Width,  MenuItemsSideBar_Small_14.X + MenuItemsSideBar_Small_14.Width), 0)
            Y: =56
            ZIndex: =2

        SaveButton_7 As htmlViewer:
            BorderStyle: =BorderStyle.Solid
            Font: =Font.Arial
            Height: =50
            HtmlText: |-
                ="<div style=""width: 40px; height: 38px; display: flex; justify-content: center; align-items: center; border: 1px solid black; border-radius: 5px; cursor: pointer""><svg xmlns=""http://www.w3.org/2000/svg"" width=""24"" height=""24"" viewBox=""0 0 24 24"" fill=""none"">
                  <path d=""M21 7V19C21 19.55 20.804 20.021 20.412 20.413C20.02 20.805 19.5493 21.0007 19 21H5C4.45 21 3.979 20.804 3.587 20.412C3.195 20.02 2.99934 19.5493 3 19V5C3 4.45 3.196 3.979 3.588 3.587C3.98 3.195 4.45067 2.99934 5 3H17L21 7ZM19 7.85L16.15 5H5V19H19V7.85ZM12 18C12.8333 18 13.5417 17.7083 14.125 17.125C14.7083 16.5417 15 15.8333 15 15C15 14.1667 14.7083 13.4583 14.125 12.875C13.5417 12.2917 12.8333 12 12 12C11.1667 12 10.4583 12.2917 9.875 12.875C9.29167 13.4583 9 14.1667 9 15C9 15.8333 9.29167 16.5417 9.875 17.125C10.4583 17.7083 11.1667 18 12 18ZM6 10H15V6H6V10ZM5 7.85V19V5V7.85Z"" fill=""#525252""/>
                </svg></div>"
            OnSelect: |-
                =UpdateContext({ShowNotification: false});
                If(!IsEmpty(mlInvalidRows), Set(IsError, true); Set(NoticationText,"Invalid data, please check the data again."); UpdateContext({ShowNotification: true}),
                If(CountRows(listMarginPolicyInput) > 0, 
                    Set(isLoading,true);
                    Set(resCreatePolicy,{listCurrentPolicy:listMarginPolicyInput});
                    ClearCollect(resPolicy, 'TVS->CreateUpdateCurrentPolicyProcess4-V1'.Run(resKeyOpenAll.open,resKeyOpenAll.close,JSON(resCreatePolicy,JSONFormat.IndentFour),envDEV,envTEST,envTEST,envUAT2,First  (currentUserV2Res).id));
                    If(!IsBlank(resPolicy),
                        ClearCollect(listItem123,'TVS->FindAllCurrrentPolicy'.Run(resKeyOpenAll.open,resKeyOpenAll.close,Text(DateFrom_Datepicker_4.SelectedDate, "yyyy-mm-dd hh:mm:ss"),Text(DateTo_DatePicker_5.SelectedDate, "yyyy-mm-dd hh:mm:ss"),PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        ClearCollect(listRes,listItem123);
                        Reset(TextInput2_1);
                        Set(NoticationText,"Saved successfully"); UpdateContext({ShowNotification: true});
                        Set(inputChanged, false),
                        Set(IsError, true); Set(NoticationText,"Save failed!"); UpdateContext({ShowNotification: true});
                    );
                );
                If(CountRows(listNotAllowInputStock) > 0, 
                    Set(resUnTrading,{listUnTrading:listNotAllowInputStock});
                    Set(isLoading, true);
                    ClearCollect(resListStock,'TVS->CreateUnTradingProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,JSON(resUnTrading,JSONFormat.IndentFour),First(currentUserV2Res).id,envDEV,envTEST,envTEST,envUAT2));
                    If(!IsBlank(resListStock),
                        ClearCollect(listItemUnTrading,'TVS->FindAllUnTrading'.Run(resKeyOpenAll.open,resKeyOpenAll.close,Text(DateFrom_Datepicker_4.SelectedDate, "yyyy-mm-dd hh:mm:ss"),Text(DateTo_DatePicker_5.SelectedDate, "yyyy-mm-dd hh:mm:ss"),PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        Reset(TextInput2_2);
                        Set(NoticationText,"Saved successfully");
                        UpdateContext({ShowNotification: true});
                        Set(inputChanged, false),
                        Set(IsError, true); Set(NoticationText,"Save failed!"); UpdateContext({ShowNotification: true})
                    );
                
                );
                If(!IsBlank(Equity_Input.Text),
                    Set(eValue, {equity: Text(Value(Equity_Input.Text))});
                    Set(isLoading, true);
                    ClearCollect(resEquity, 'TVS->CreateUpdateEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,JSON(eValue,JSONFormat.IndentFour),"0",envDEV,envTEST,envTEST,envUAT2,First  (currentUserV2Res).id));
                    If(!IsBlank(resEquity),
                        ClearCollect(listItemEquity,'TVS->FindAllEquityProcess4'.Run(resKeyOpenAll.open,resKeyOpenAll.close,Text(DateFrom_Datepicker_4.SelectedDate, "yyyy-mm-dd hh:mm:ss"),Text(DateTo_DatePicker_5.SelectedDate, "yyyy-mm-dd hh:mm:ss"),PageSizeNumber,currentPageIndex,envDEV,envTEST,envUAT1,envUAT2));
                        Reset(Equity_Input);
                        Set(NoticationText,"Saved successfully");
                        UpdateContext({ShowNotification: true});
                        Set(inputChanged, false),
                        Set(IsError, true); Set(NoticationText,"Save failed!"); UpdateContext({ShowNotification: true})
                    );
                );
                Set(isLoading, false)
                );
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Visible: ="RISK_MANAGER_CREATE" in LookUp(currenUserV2.permissionList,process_code = "Process4",action) && CountRows(mlInvalidRows) = 0 && inputChanged
            Width: =42
            X: =SubHeaderBg_7.X + SubHeaderBg_7.Width - Self.Width - 20
            Y: =btnReject.Y
            ZIndex: =3

        SubHeaderHr_8 As rectangle:
            Fill: =RGBA(191, 191, 192, 1)
            Height: =IconBack_7.Height + 10
            Visible: =App.Width > 600
            Width: =0.5
            X: =IconBack_7.X + IconBack_7.Width + 5
            Y: =IconBack_7.Y - 5
            ZIndex: =4

        IconBack_7 As icon.ArrowLeft:
            Color: =RGBA(0, 0, 0, 1)
            Height: =If(App.Width > 600, 25, 15)
            Icon: =If(App.Width > 600, Icon.ArrowLeft, Icon.ChevronLeft)
            OnSelect: =Navigate(TableMarginLimit, ScreenTransition.Fade)
            Width: =If(App.Width > 600, 40, 15)
            X: =SubHeaderBg_7.X + 10
            Y: =SubHeaderBg_7.Y + If(App.Width > 600, 12, 20)
            ZIndex: =5

    Header_8 As Header:
        ZIndex: =6

    Timer1_28 As timer:
        Duration: =3000
        Font: =Font.Arial
        OnTimerEnd: |-
            =Reset(Timer1_28); UpdateContext({ShowNotification: false});
        Start: =ShowNotification
        Visible: =false
        X: =100
        Y: =667
        ZIndex: =7

    NotificationBox_26 As button:
        Align: =Align.Left
        BorderColor: =RGBA(40, 167, 69, 1)
        BorderThickness: =0
        DisabledFill: =Self.Fill
        Fill: =If(IsError, RGBA(209, 50, 50, 1), RGBA(40, 167, 69, 1))
        FocusedBorderThickness: =0
        Font: =Font.Arial
        Height: =50
        HoverBorderColor: =Self.Fill
        HoverFill: =Self.Fill
        PaddingLeft: =15
        PaddingRight: =30
        PressedColor: =RGBA(255, 255, 255, 1)
        PressedFill: =Self.Fill
        RadiusBottomLeft: =5
        RadiusBottomRight: =5
        RadiusTopLeft: =5
        RadiusTopRight: =5
        Size: =10.5
        Text: =NoticationText
        Visible: =Timer1_28.Value <> 0
        Width: =320
        X: =App.Width - Self.Width - 2
        Y: =100
        ZIndex: =8

    CloseNotiIcon_26 As icon.Cancel:
        Color: =RGBA(255, 255, 255, 1)
        Height: =15
        Icon: =Icon.Cancel
        OnSelect: =Reset(Timer1_28)
        Visible: =NotificationBox_26.Visible
        Width: =15
        X: =NotificationBox_26.X + NotificationBox_26.Width - 25
        Y: =NotificationBox_26.Y + 17.5
        ZIndex: =9

    MenuItemsSideBar_15 As MenuItemsSideBar:
        Height: =Parent.Height - Self.Y
        MenuItems: |-
            =Table(
                {
                    MenuLabel: "Dashboard",
                    MenuIcon: MenuItemsSideBar_15.IconDasboard,
                    MenuScreenNavigate: Dashboard,
                    MenuID: 1,
                    MenuIconDropDown: MenuItemsSideBar_15.IconDropDown,
                    MenuIconDropUp: MenuItemsSideBar_15.IconDropUp,
                    Submenu: []
                },
                {
                    MenuLabel: "Portal",
                    MenuIcon: MenuItemsSideBar_15.IconSettings,
                    MenuScreenNavigate: Dashboard,
                    MenuID: 2,
                    MenuIconDropDown: MenuItemsSideBar_15.IconDropDown,
                    MenuIconDropUp: MenuItemsSideBar_15.IconDropUp,
                    Submenu: Table(
                        {
                            MenuLabel: "'Information of non-listed compan",
                            MenuIcon: MenuItemsSideBar_15.IconDasboard,
                            MenuScreenNavigate: Portal,
                            MenuID: 2.1
                        },
                        {
                            MenuLabel: "Comunication Records (Minutes of meeting)",
                            MenuIcon: MenuItemsSideBar_15.IconDasboard,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 2.2
                        },
                        {
                            MenuLabel: "Investment Research",
                            MenuIcon: MenuItemsSideBar_15.IconDasboard,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 2.3
                        }
                    )
                },
                {
                    MenuLabel: "Business process",
                    MenuIcon: MenuItemsSideBar_15.IconFile,
                    MenuScreenNavigate: Dashboard,
                    MenuID: 3,
                    MenuIconDropDown: MenuItemsSideBar_15.IconDropDown,
                    MenuIconDropUp: MenuItemsSideBar_15.IconDropUp,
                    Submenu: Table(
                        {
                            MenuLabel: "M&A",
                            MenuIcon: MenuItemsSideBar_15.IconFile,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 3.1
                        },
                        {
                            MenuLabel: "Fixed Income Investment ProcessA",
                            MenuIcon: MenuItemsSideBar_15.IconFile,
                            MenuScreenNavigate: TableProposalQT2,
                            MenuID: 3.2
                        },
                        {
                            MenuLabel: "Margin limit approvalprocess (ad-hoc)",
                            MenuIcon: MenuItemsSideBar_15.IconFile,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 3.3
                        },
                        {
                            MenuLabel: "PEVC",
                            MenuIcon: MenuItemsSideBar_15.IconFile,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 3.4
                        }
                    )
                },
                {
                    MenuLabel: "Admin",
                    MenuIcon: MenuItemsSideBar_15.IconSettings,
                    MenuScreenNavigate: Dashboard,
                    MenuID: 4,
                    MenuIconDropDown: MenuItemsSideBar_15.IconDropDown,
                    MenuIconDropUp: MenuItemsSideBar_15.IconDropUp,
                    Submenu: Table(
                        {
                            MenuLabel: "Manager Authoration&A",
                            MenuIcon: MenuItemsSideBar_15.IconFile,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 4.1
                        },
                        {
                            MenuLabel: "Decentralization",
                            MenuIcon: MenuItemsSideBar_15.IconFile,
                            MenuScreenNavigate: TableProposalQT2,
                            MenuID: 4.2
                        }
                    )
                }
            )
        Visible: =MobileShowMenu
        Width: =If(App.Width > 600, 240, App.Width)
        Y: =56
        ZIndex: =10

    MenuItemsSideBar_Small_20 As MenuItemsSideBar_Small:
        Height: =Parent.Height - Self.Y
        MenuItems: |-
            =Table(
                {
                    MenuLabel: "Dashboard",
                    MenuIcon: MenuItemsSideBar_Small_20.IconDasboard,
                    MenuScreenNavigate: Dashboard,
                    MenuID: 1,
                    MenuIconDropDown: MenuItemsSideBar_Small_20.IconDropDown,
                    MenuIconDropUp: MenuItemsSideBar_Small_20.IconDropUp,
                    Submenu: []
                },
                {
                    MenuLabel: "Portal",
                    MenuIcon: MenuItemsSideBar_Small_20.IconSettings,
                    MenuScreenNavigate: Dashboard,
                    MenuID: 2,
                    MenuIconDropDown: MenuItemsSideBar_Small_20.IconDropDown,
                    MenuIconDropUp: MenuItemsSideBar_Small_20.IconDropUp,
                    Submenu: Table(
                        {
                            MenuLabel: "'Information of non-listed compan",
                            MenuIcon: MenuItemsSideBar_Small_20.IconDasboard,
                            MenuScreenNavigate: Portal,
                            MenuID: 2.1
                        },
                        {
                            MenuLabel: "Comunication Records (Minutes of meeting)",
                            MenuIcon: MenuItemsSideBar_Small_20.IconDasboard,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 2.2
                        },
                        {
                            MenuLabel: "Investment Research",
                            MenuIcon: MenuItemsSideBar_Small_20.IconDasboard,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 2.3
                        }
                    )
                },
                {
                    MenuLabel: "Business process",
                    MenuIcon: MenuItemsSideBar_Small_20.IconFile,
                    MenuScreenNavigate: Dashboard,
                    MenuID: 3,
                    MenuIconDropDown: MenuItemsSideBar_Small_20.IconDropDown,
                    MenuIconDropUp: MenuItemsSideBar_Small_20.IconDropUp,
                    Submenu: Table(
                        {
                            MenuLabel: "M&A",
                            MenuIcon: MenuItemsSideBar_Small_20.IconFile,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 3.1
                        },
                        {
                            MenuLabel: "Fixed Income Investment ProcessA",
                            MenuIcon: MenuItemsSideBar_Small_20.IconFile,
                            MenuScreenNavigate: TableProposalQT2,
                            MenuID: 3.2
                        },
                        {
                            MenuLabel: "Margin limit approvalprocess (ad-hoc)",
                            MenuIcon: MenuItemsSideBar_Small_20.IconFile,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 3.3
                        },
                        {
                            MenuLabel: "PEVC",
                            MenuIcon: MenuItemsSideBar_Small_20.IconFile,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 3.4
                        }
                    )
                },
                {
                    MenuLabel: "Admin",
                    MenuIcon: MenuItemsSideBar_Small_20.IconSettings,
                    MenuScreenNavigate: Dashboard,
                    MenuID: 4,
                    MenuIconDropDown: MenuItemsSideBar_Small_20.IconDropDown,
                    MenuIconDropUp: MenuItemsSideBar_Small_20.IconDropUp,
                    Submenu: Table(
                        {
                            MenuLabel: "Manager Authoiation&A",
                            MenuIcon: MenuItemsSideBar_Small_20.IconFile,
                            MenuScreenNavigate: Dashboard,
                            MenuID: 4.1
                        },
                        {
                            MenuLabel: "Decentralization",
                            MenuIcon: MenuItemsSideBar_Small_20.IconFile,
                            MenuScreenNavigate: TableProposalQT2,
                            MenuID: 4.2
                        }
                    )
                }
            )
        Visible: =App.Width > 800 && !MobileShowMenu
        Y: =56
        ZIndex: =11

    LoadingComponent_10 As LoadingComponent:
        Visible: =isLoading
        ZIndex: =12

    NotificationScreen_17 As NotificationScreen:
        Visible: =ShowNotificationPopup
        ZIndex: =13

    ConfirmChangeData As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =15

        RejectPopupBack_19 As rectangle:
            Fill: =RGBA(0.3, 0.3, 0.3, 0.3)
            Height: =Parent.Height
            Visible: =showPopupChangeData
            Width: =Parent.Width
            ZIndex: =14

        DeleteConfirmBg_16 As htmlViewer:
            Font: =Font.Arial
            Height: =If(Parent.Width > 600, 180, 200)
            HtmlText: |-
                ="<div style='margin-left: 8px; width: calc(100% - 16px); height: "& Self.Height - 20 &"px; background-color: white; border-radius: 12px;box-shadow: 5px 4px 8px 0px rgba(0, 0, 0, 0.10);
                '></div>"
            PaddingRight: =5.00
            PaddingTop: =5.00
            Size: =11.00
            Visible: =showPopupChangeData
            Width: =If(App.Width > 600, 550, App.Width + 5)
            X: =If(App.Width > 600, App.Width * 0.5 - DeleteConfirmBg_16.Width *0.5, 0)
            Y: =If(App.Width > 600, App.Height / 2 - 200, 5)
            ZIndex: =15

        CancelResearchOpinionButton_13 As button:
            BorderColor: =Self.Color
            BorderThickness: =1
            Color: =RGBA(214, 27, 27, 1)
            DisabledBorderColor: =RGBA(214, 27, 27, 1)
            DisabledColor: =RGBA(214, 27, 27, 1)
            DisabledFill: =RGBA(0, 0, 0, 0)
            Fill: =RGBA(0, 0, 0, 0)
            FocusedBorderThickness: =1
            Font: =Font.Arial
            Height: =44
            HoverColor: =RGBA(214, 27, 27, 1)
            HoverFill: =ColorFade(Self.Fill , -15%)
            OnSelect: |-
                =Set(confirmChangeData, false);
                Set(showPopupChangeData, false);
            PressedBorderColor: =RGBA(214, 27, 27, 1)
            PressedColor: =RGBA(214, 27, 27, 1)
            PressedFill: =
            RadiusBottomLeft: =8
            RadiusBottomRight: =8
            RadiusTopLeft: =8
            RadiusTopRight: =8
            Size: =10.5
            Text: ="No"
            Visible: =showPopupChangeData
            Width: =120
            X: =DeleteConfirmBg_16.X + DeleteConfirmBg_16.Width - 280
            Y: =DeleteConfirmBg_16.Y + DeleteConfirmBg_16.Height - 70
            ZIndex: =16

        DeleteResearchOpinionButton_13 As button:
            BorderThickness: =
            DisabledBorderColor: =RGBA(214, 27, 27, 1)
            DisabledColor: =RGBA(255, 255, 255, 1)
            DisabledFill: =RGBA(214, 27, 27, 1)
            Fill: =RGBA(214, 27, 27, 1)
            FocusedBorderThickness: =
            Font: =Font.Arial
            Height: =44
            HoverFill: =ColorFade(Self.Fill , -15%)
            OnSelect: |-
                =Clear(mlInvalidRows);
                Set(showPopupChangeData, false);
                Set(confirmChangeData, true);
                Set(isLoading, true);
                Set(inputChanged, false);
                Switch(tabTemp,
                1, 
                Select(TVS_Margin_Tab),
                2,
                Select(ListNotAllowTab_2),
                3,
                Select(TVS_Equity_Tab)
                );
                Set(isLoading, false);
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =RGBA(214, 27, 27, 1)
            RadiusBottomLeft: =8
            RadiusBottomRight: =8
            RadiusTopLeft: =8
            RadiusTopRight: =8
            Size: =10.5
            Text: ="Yes"
            Visible: =showPopupChangeData
            Width: =120
            X: =DeleteConfirmBg_16.X + DeleteConfirmBg_16.Width - 150
            Y: =DeleteConfirmBg_16.Y + DeleteConfirmBg_16.Height - 70
            ZIndex: =17

        DeleteConfirmCloseIcon_18 As icon.Cancel:
            Color: =RGBA(26, 26, 26, 1)
            Height: =20
            Icon: =Icon.Cancel
            OnSelect: |-
                =Set(confirmChangeData, false);
                Set(showPopupChangeData, false);
            Visible: =showPopupChangeData
            Width: =20
            X: =DeleteConfirmBg_16. X + DeleteConfirmBg_16.Width -50
            Y: =DeleteConfirmBg_16.Y + 25
            ZIndex: =18

        DeleteConfirmLabel_19 As label:
            Font: =Font.Arial
            Size: =12
            Text: ="Your data has not been saved. Are you sure you want to switch tabs?"
            Visible: =showPopupChangeData
            Width: =DeleteConfirmBg_16.Width - 100 - DeleteConfirmCloseIcon_18.Width
            X: =DeleteConfirmBg_16.X + 20
            Y: =DeleteConfirmBg_16.Y + 25
            ZIndex: =19

